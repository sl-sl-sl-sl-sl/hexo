{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/landscape/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":1,"renderable":1},{"_id":"themes/landscape/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","path":"fancybox/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","path":"css/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","path":"fancybox/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","path":"fancybox/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","path":"fancybox/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","path":"fancybox/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","path":"fancybox/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","path":"fancybox/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"themes/landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/landscape/.gitignore","hash":"58d26d4b5f2f94c2d02a4e4a448088e4a2527c77","modified":1470380073000},{"_id":"themes/landscape/Gruntfile.js","hash":"71adaeaac1f3cc56e36c49d549b8d8a72235c9b9","modified":1470380073000},{"_id":"source/.DS_Store","hash":"25a3921d4ca10c7c3070aa8e38aca09a1ce29e80","modified":1470379782000},{"_id":"themes/landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1470380073000},{"_id":"source/CNAME","hash":"e529069a631eb6677fb6148781770734cbe55bcb","modified":1470290226000},{"_id":"themes/landscape/_config.yml","hash":"fb8c98a0f6ff9f962637f329c22699721854cd73","modified":1470380073000},{"_id":"themes/landscape/package.json","hash":"85358dc34311c6662e841584e206a4679183943f","modified":1470380073000},{"_id":"themes/landscape/README.md","hash":"c7e83cfe8f2c724fc9cac32bd71bb5faf9ceeddb","modified":1470380073000},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1470380315000},{"_id":"source/_posts/unicodeç¬”è®°.md","hash":"87a24c61f51da3fe599eed8d3cf878efb924c0c3","modified":1470393910000},{"_id":"source/categories/index.md","hash":"a613900e13e9aa2ead724c50adad5c8b17470216","modified":1470379715000},{"_id":"source/categories/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1470373281000},{"_id":"themes/landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1470380073000},{"_id":"themes/landscape/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1470380073000},{"_id":"themes/landscape/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1470380073000},{"_id":"themes/landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1470380073000},{"_id":"themes/landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1470380073000},{"_id":"themes/landscape/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1470380073000},{"_id":"themes/landscape/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1470380073000},{"_id":"themes/landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1470380073000},{"_id":"themes/landscape/layout/layout.ejs","hash":"f155824ca6130080bb057fa3e868a743c69c4cf5","modified":1470380073000},{"_id":"themes/landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1470380073000},{"_id":"themes/landscape/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1470380073000},{"_id":"themes/landscape/scripts/fancybox.js","hash":"aa411cd072399df1ddc8e2181a3204678a5177d9","modified":1470380073000},{"_id":"themes/landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1470380073000},{"_id":"themes/landscape/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1470380073000},{"_id":"themes/landscape/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/after-footer.ejs","hash":"82a30f81c0e8ba4a8af17acd6cc99e93834e4d5e","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/article.ejs","hash":"c4c835615d96a950d51fa2c3b5d64d0596534fed","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/archive.ejs","hash":"931aaaffa0910a48199388ede576184ff15793ee","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/header.ejs","hash":"c21ca56f419d01a9f49c27b6be9f4a98402b2aa3","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/head.ejs","hash":"4fe8853e864d192701c03e5cd3a5390287b90612","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/footer.ejs","hash":"93518893cf91287e797ebac543c560e2a63b8d0e","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":1470380073000},{"_id":"themes/landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":1470380073000},{"_id":"themes/landscape/layout/_widget/recent_posts.ejs","hash":"0d4f064733f8b9e45c0ce131fe4a689d570c883a","modified":1470380073000},{"_id":"themes/landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":1470380073000},{"_id":"themes/landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":1470380073000},{"_id":"themes/landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":1470380073000},{"_id":"themes/landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":1470380073000},{"_id":"themes/landscape/source/css/_variables.styl","hash":"5e37a6571caf87149af83ac1cc0cdef99f117350","modified":1470380073000},{"_id":"themes/landscape/source/css/style.styl","hash":"a70d9c44dac348d742702f6ba87e5bb3084d65db","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1470380073000},{"_id":"themes/landscape/source/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/post/date.ejs","hash":"6197802873157656e3077c5099a7dda3d3b01c29","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1470380073000},{"_id":"themes/landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1470380073000},{"_id":"themes/landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":1470380073000},{"_id":"themes/landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/article.styl","hash":"10685f8787a79f79c9a26c2f943253450c498e3e","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/header.styl","hash":"85ab11e082f4dd86dde72bed653d57ec5381f30c","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/highlight.styl","hash":"bf4e7be1968dad495b04e83c95eac14c4d0ad7c0","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":1470380073000},{"_id":"themes/landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":1470380073000},{"_id":"themes/landscape/source/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1470380073000},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1470380073000},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1470380073000},{"_id":"themes/landscape/source/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1470380073000},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1470380073000},{"_id":"themes/landscape/source/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1470380073000},{"_id":"themes/landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1470380073000},{"_id":"public/categories/index.html","hash":"b163df30f32e7658126e8b91cf058a3bb4cd7b6e","modified":1471918073541},{"_id":"public/archives/index.html","hash":"fcecf0986232cb9c2e170ed1c545d27327cf471d","modified":1471918073541},{"_id":"public/archives/2016/index.html","hash":"5f4e8449ae4c5591fce42e4c68a932a41feb8501","modified":1471918073541},{"_id":"public/archives/2016/08/index.html","hash":"bf8617bba3b6c143f86300d088ced0aa09d5a3e8","modified":1471918073541},{"_id":"public/categories/å­—ç¬¦ä¸²/index.html","hash":"0a625ea3321d0b1501082381df3b55bf11d15bc0","modified":1471918073542},{"_id":"public/tags/Unicode/index.html","hash":"d3309770d1d718a0b8288c56682fc0280ce17e01","modified":1471918073544},{"_id":"public/tags/NSString/index.html","hash":"b0a00b798b4130403b43f6e9198017cf19c01153","modified":1471918073544},{"_id":"public/tags/unichar/index.html","hash":"32767cd3d4e94234cf6416c73feb9ee1650401a1","modified":1471918073544},{"_id":"public/tags/UTF-32/index.html","hash":"5190c08cbd34556743644eba0ead10b08f5dc5bc","modified":1471918073545},{"_id":"public/tags/UTF-16/index.html","hash":"5f2f058ef5d2ce48a9452c7482e9b35458931d15","modified":1471918073545},{"_id":"public/tags/UTF-8/index.html","hash":"9f69aed4633dfe05e3695e3091f8df5d053111e8","modified":1471918073545},{"_id":"public/2016/08/05/unicodeç¬”è®°/index.html","hash":"f28c8e628c0f7b50acacf24542d4871d4d39b67f","modified":1471918073545},{"_id":"public/index.html","hash":"0c5319a190f09337ac3fbe38ba65aacb28ff466b","modified":1471918073545},{"_id":"public/CNAME","hash":"e529069a631eb6677fb6148781770734cbe55bcb","modified":1471918073563},{"_id":"public/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1471918073563},{"_id":"public/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1471918073563},{"_id":"public/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1471918073563},{"_id":"public/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1471918073563},{"_id":"public/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1471918073563},{"_id":"public/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1471918073563},{"_id":"public/css/fonts/FontAwesome.otf","hash":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1471918073563},{"_id":"public/css/fonts/fontawesome-webfont.eot","hash":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1471918073563},{"_id":"public/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1471918073564},{"_id":"public/css/fonts/fontawesome-webfont.woff","hash":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1471918073564},{"_id":"public/css/fonts/fontawesome-webfont.ttf","hash":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1471918075189},{"_id":"public/js/script.js","hash":"2876e0b19ce557fca38d7c6f49ca55922ab666a1","modified":1471918075195},{"_id":"public/fancybox/jquery.fancybox.css","hash":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1471918075195},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1471918075195},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1471918075195},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1471918075195},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1471918075195},{"_id":"public/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1471918075195},{"_id":"public/css/style.css","hash":"11c9f812d2e2c9f4980553c78844522fa960a413","modified":1471918075195},{"_id":"public/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1471918075195},{"_id":"public/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1471918075195},{"_id":"public/css/fonts/fontawesome-webfont.svg","hash":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1471918075196},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1471918075196}],"Category":[{"name":"å­—ç¬¦ä¸²","_id":"cis6u0lk20003xts6sirohrux"}],"Data":[],"Page":[{"title":"categories","date":"2016-08-03T10:28:47.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2016-08-03 18:28:47\ntype: \"categories\"\n---\n","updated":"2016-08-05T06:48:35.000Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cis6u0ljt0001xts6xpwoxjkg","content":"","excerpt":"","more":""}],"Post":[{"title":"Unicodeå­¦ä¹ ç¬”è®°","date":"2016-08-04T17:30:00.000Z","_content":"\n\n\n# Unicode\n\t\n`Unicode` æ˜¯21ä½ç¼–ç , ä¸æ˜¯16ä½, è¢«åˆ†ä¸º17ä¸ªå¹³é¢ [Plane](https://en.wikipedia.org/wiki/Plane_&#41;Unicode&#41;), æ¯ä¸ªå¹³é¢æœ‰65536ä¸ªå­—ç¬¦. 0å·å¹³é¢å«åšåŸºæœ¬å¤šæ–‡ç§å¹³é¢ (Basic Multilingual Plane, BMP), æ¶µç›–äº†å‡ ä¹æ‰€æœ‰å­—ç¬¦, é™¤äº† `emoji`.\n\n### ç ç‚¹\nå•ä¸€ç ç‚¹: ä¸€èˆ¬å­—ç¬¦éƒ½æ˜¯å•ä¸€ç ç‚¹\n\nç»„åˆç ç‚¹: ç”±ä¸¤ä¸ªç ç‚¹ç»„åˆè€Œæˆ\n\t\n`Ã©(U+00E9) å¯æ˜¯çœ‹æˆ e(U+0065) å’Œ Â´(U+0301) ç»„æˆ`\n\n### é‡å¤çš„å®šä¹‰\n\t\næ ‡å‡†ç­‰ä»·(canonically equivalent): ä¸åŒç ç‚¹æˆ–ä¸åŒå½¢å¼çš„ç ç‚¹, æœ‰ç›¸åŒçš„å¤–è§‚ä¸æ„ä¹‰\n\n`A(U+0041),\tA(U+0410)`\n\nç›¸å®¹ç­‰ä»·(compatibility equivalence): ç›¸åŒçš„å­—ç¬¦, ä½†åœ¨ä¸åŒä½¿ç”¨èŒƒå›´æœ‰ä¸åŒçš„æ„ä¹‰\t\n\t\n`ff(U+FB00),  f(U+0066) f(U+0066) `\n\n### æ­£è§„å½¢å¼ \n\nåœ¨ `Unicode` é‡Œ, åˆ¤æ–­å­—ç¬¦ä¸²çš„ç­‰ä»·æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•æ¦‚å¿µ, ä¸ºäº†é‰´å®šæ ‡å‡†ç­‰ä»·ä¸ç›¸å®¹ç­‰ä»·, `Unicode` å®šä¹‰äº†æ­£è§„åŒ–(normalization)ç®—æ³•. æ­£è§„åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ„æ€æ˜¯ï¼šä¸ºäº†èƒ½ä½¿å®ƒä¸å¦ä¸€ä¸ªæ­£è§„åŒ–äº†çš„å­—ç¬¦ä¸²è¿›è¡ŒäºŒè¿›åˆ¶æ¯”è¾ƒ(binary-compare)\n\n` | åˆæˆå½¢å¼(Ã©): | åˆ†è§£å½¢å¼ (e + Â´ )\n:------------: | :-------------: | :------------:\næ ‡å‡†ç­‰ä»· | C | D\n` | precomposedStringWithCanonicalMapping | decomposedStringWithCanonicalMapping\nç›¸å®¹ç­‰ä»· | KC | KD\n` | precomposedStringWithCompatibilityMapping | decomposedStringWithCompatibilityMapping\n\nä»…ä»…æ˜¯ä¸ºäº†æ¯”è¾ƒçš„è¯, å…ˆæŠŠå­—ç¬¦ä¸²æ­£è§„åŒ–æˆåˆ†è§£å½¢å¼(D)è¿˜æ˜¯åˆæˆå½¢å¼(C)å¹¶ä¸é‡è¦, ä½†æ˜¯CåŒ…å«ä¸¤ä¸ªæ­¥éª¤,å…ˆåˆ†è§£å†åˆæˆ, æ‰€æœ‰Dæ›´å¿«, `Unicode`è”ç›Ÿæ¨èç”¨Cçš„æ–¹å¼å­˜å‚¨, è¿™æ˜¯ä¸ºäº†å…¼å®¹æ—§çš„ç¼–ç ç³»ç»Ÿ. \n\n### å­—å½¢å˜ä½“\n\n`Unicode`æä¾›ä¸€ä¸ªå«åšå˜ä½“åºåˆ—(variation sequences)çš„æœºåˆ¶. ä¸€ä¸ªåŸºå‡†å­—ç¬¦åŠ ä¸Š256ä¸ªå˜ä½“é€‰æ‹©ç¬¦\n\t`emoji`çš„æ ·å¼å°±æ˜¯å˜ä½“åºåˆ—, ä¾‹: å½©è‰²çš„ä¼ä¸é»‘ç™½çš„ä¼  â˜”ï¸ (U+2614 U+FE0F), â˜”ï¸ (U+2614 U+FE0E)\n\n### UTF-32\n\n`UTF-32` æ¯ä¸ªç ç‚¹ä¸Šä½¿ç”¨æ•´32ä½, æ¯ä¸€ä¸ª `UTF-32` éƒ½å¯ä»¥ç›´æ¥è¡¨ç¤ºå¯¹åº”çš„ç ç‚¹, ä½†æ˜¯ä»æœªåœ¨å®é™…ä¸­ä½¿ç”¨, å› ä¸ºæ¯ä¸ªå­—ç¬¦å ç”¨4å­—èŠ‚å¤ªæµªè´¹æ§ä»¶\n\n##UTF-16 ä¸ ä»£ç†å¯¹ (Surrogate Pairs)\n`UTF-16` æ˜¯ä¸€ç§é•¿åº¦å¯å˜çš„ç¼–ç , åŸºæœ¬å¤šæ–‡ä¸­å¹³é¢(BMP)ä¸­æ¯ä¸€ä¸ªç ç‚¹éƒ½ç›´æ¥ä¸ä¸€ä¸ªç å…ƒç›¸æ˜ å°„. å…¶ä»–å¹³é¢(plane)éƒ½æ˜¯ä¸¤ä¸ª16ä½ç å…ƒæ¥ç¼–ç çš„, è¿™åˆèµ·æ¥è¡¨ç¤ºä¸€ä¸ªç ç‚¹çš„ç å…ƒå°±å«ä»£ç†å¯¹.\n\nä¸ºäº†é¿å…ä½¿ç”¨ `UTF-16` ç¼–ç çš„å­—ç¬¦ä¸²å­—èŠ‚åºåˆ—äº§ç”Ÿæ­§ä¹‰, `Unicode` é™åˆ¶äº† `U+0800` åˆ° `U+DFFF` èŒƒå›´å†…çš„ç¼–ç ç”¨äº `UTF-16`, è¿™ä¸ªèŒƒå›´å¤–çš„åºåˆ—ä¸ºä»£ç†å¯¹çš„ä¸€éƒ¨åˆ†. `UTF-16` ä¸‹, `U+0FFFF` æ˜¯ç¼–ç æœ€é«˜å€¼\n\n### å­—èŠ‚é¡ºåº\n\nåœ¨å†…å­˜é‡Œå­˜å‚¨çš„å­—ç¬¦ä¸², å¤§å¤šæ•°å®ç°æ–¹å¼é‡‡ç”¨è‡ªå·±å¹³å°çš„CPUå­—èŠ‚åº(endianness), è€Œåœ¨ç¡¬ç›˜å­˜å‚¨å’Œç½‘ç»œä¼ è¾“ä¸­, UTF8 è¯­åºåœ¨å­—ç¬¦ä¸²çš„å¼€å¤´æ’å…¥ä¸€ä¸ªå­—èŠ‚é¡ºåºæ ‡è®°(Byte Order Mask, BOM). å­—èŠ‚é¡ºåºæ ‡è®°æ˜¯ä¸€ä¸ªå€¼ä¸ºU+FEffçš„ç å…ƒ, é€šè¿‡æ£€æŸ¥æ–‡ä»¶çš„å¤´ä¸¤ä¸ªå­—èŠ‚, è§£ç å™¨å°±å¯ä»¥è¯†åˆ«å‡ºå…¶å­—èŠ‚é¡ºåº. UnicodeæŠŠé«˜å­—èŠ‚é¡ºåº(big-endian byte order)å®šä¸ºé»˜è®¤æƒ…å†µ.\n\n##UTF-8 (Ken Thompson å’Œ Rob Pike)\n\t\n`UTF-8` ä½¿ç”¨1~4ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªç ç‚¹. ä»0åˆ°127çš„è¿™äº›ç ç‚¹ç›´æ¥æ˜ å°„æˆ1ä¸ªå­—èŠ‚(ä¸ASCIIå®Œå…¨ç›¸åŒ), æ¥ä¸‹æ¥çš„1920æ­Œç ç‚¹æ˜ å°„æˆ2ä¸ªå­—èŠ‚, BMPé‡Œå‰©ä¸‹çš„ç ç‚¹éœ€è¦3ä¸ªå­—èŠ‚. `Unicode` çš„å…¶ä»–å¹³é¢é‡Œçš„ç ç‚¹åˆ™éœ€è¦4ä¸ªå­—èŠ‚. `UTF-8` æ˜¯åŸºäº8ä½çš„ç å…ƒçš„, å› æ­¤ä¸éœ€è¦å…³å¿ƒå­—èŠ‚é¡ºåº.\n\t\n`UTF-8` æˆä¸ºå­˜å‚¨å’Œäº¤æµ `Unicode` æ–‡æœ¬æ–¹é¢çš„æœ€ä½³ç¼–ç , ç”±äºå…¶æœ‰æ•ˆç‡çš„ç©ºé—´ä½¿ç”¨(ä»…å°±è¥¿æ–¹è¯­è¨€æ¥è®²)ï¼Œä»¥åŠä¸éœ€è¦æ“å¿ƒå­—èŠ‚é¡ºåº, å®ƒç°åœ¨ä¹Ÿå·²ç»æ˜¯æ–‡ä»¶æ ¼å¼ã€ç½‘ç»œåè®®ä»¥åŠ Web API é¢†åŸŸé‡Œäº‹å®ä¸Šçš„æ ‡å‡†äº†.\n\n### é•¿åº¦\n\t\nåŸºæœ¬å¤šç¨³é‡å¹³é¢å¤–çš„å­—ç¬¦:\n\néšç€emojiè¢«å¼•å…¥`Unicode`, ç»å¸¸ä¼šé‡åˆ°ä»£ç†å¯¹\n\n`[ğŸŒ length] == 2  true`\n\nç›´æ¥è®¡ç®—å­—ç¬¦ä¸²åœ¨UTF-32ç¼–ç ä¸‹æ‰€éœ€è¦çš„å­—èŠ‚æ•°, å†é™¤ä»¥4\n\t\t\n`[ğŸŒ lengthOfBytesUsingEncoding:UTF32StringEncoding]/4 == 1 true`\n\nç»„åˆå­—ç¬¦åºåˆ—:\n\t\n`å¦‚æœå­—æ¯ Ã© æ˜¯ä»¥åˆ†è§£å½¢å¼(e + Â´)ç¼–ç çš„ï¼Œç®—ä½œä¸¤ä¸ªç å…ƒ`\n\nå˜ä½“åºåˆ—:\n\n`ä»–ä»¬å’Œåˆ†è§£å½¢å¼çš„ç»„åˆå­—ç¬¦åºåˆ—ä¸€æ ·`\n\n\n### NSString + Unicode\n\t\nNSString å®Œå…¨å»ºç«‹åœ¨ `Unicode` ä¹‹ä¸Š, `CFString` ä¹ŸåŒ…å«äº† `NSString` çš„åº•å±‚å®ç°.\n \n`typedef unsigned short unichar`\n\n`unichar` ä¸º16ä½æ— ç¬¦å·æ•´å½¢, ä¸å¤Ÿç”¨æ¥è¡¨ç¤º21ä½ `Unicode` å­—ç¬¦.\n\n\t\t- (unichar)characterAtIndex: \t\n\t\n\t    NSString *string = @\"12ğŸŒ45\";\t// ğŸŒ2ä¸ªç å…ƒUnicode\n\t    NSLog(@\"%c\", [string characterAtIndex:1]);\n    \tNSLog(@\"%c\", [string characterAtIndex:2]);\n    \tNSLog(@\"%c\", [string characterAtIndex:3]);\n    \tNSLog(@\"%c\", [string characterAtIndex:4]);\n\n    \tLog:\n\t\t 2\n\t\t <\n\t\t ç©º\n\t\t 4\n\n   \t\tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(1, 1)]);\n   \t\tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(2, 1)]);\n   \t\tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(2, 2)]);\n    \tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(4, 1)]);\n\n    \tLog:\n    \t 2\n    \t ç©º\n    \t ğŸŒ\n    \t 5\n\n   stringä¸­, ğŸŒçš„21ä½è¢«æˆªä¸º2ä¸ª16ä½å¤„ç†, ç¬¬ä¸€ä¸ªä¸º<, ç¬¬äºŒä¸ªæœªè¯†åˆ«, æ‰€ä»¥åœ¨ä½¿ç”¨BMPä»¥å¤–çš„Unicodeæ—¶, è¦ç‰¹åˆ«æ³¨æ„\n\n\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:1]));\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:2]));\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:3]));\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:4]));\n    \t\n    \tLog:\n    \t\t{1, 1}\n\t\t\t{2, 2}\n\t\t\t{2, 2}\n\t\t\t{4, 1}\n\nåªæœ‰åœ¨`length == 1`çš„æ—¶å€™, æ‰èƒ½ç¡®è®¤`unichar`æ˜¯ä»£è¡¨å•ä¸ªç å…ƒ, ä½¿ç”¨ `-characterAtIndex:` æ–¹æ³•ä¸ä¼šå¯¼è‡´é—®é¢˜\n\néå†Stringæ¯ä¸€æ¬¡éƒ½ä½¿ç”¨ `rangeOfComposedCharacterSequenceAtIndex:` æ¥åˆ¤æ–­å­—ç¬¦æ˜¯å¦æ˜¯å•ä¸ªç å…ƒå¾ˆä¸æ–¹ä¾¿, åœ¨ Stringçš„ `enumerateSubstringsInRange:options:usingBlock:` æ–¹æ³•é‡Œ, å°†å‚æ•°æŒ‡å®šä¸º `NSStringEnumerationByComposedCharacterSequences`, å†…éƒ¨å®ç°äº†å­—ç¬¦æ˜¯å•ç å…ƒè¿˜æ˜¯åŒç å…ƒçš„åˆ¤æ–­,\n\nåŠ ä¸Š `NSStringEnumerationLocalized` å‚æ•°, åœ¨å®šä¹‰è¯è¯­é—´çš„å’Œå¥å­é—´çš„è¾¹ç•Œå¯ä»¥å°†ç”¨æˆ·æ‰€åœ¨çš„åŒºåŸŸä¹Ÿè€ƒè™‘è¿›å».\n\nè‹¹æœæŠŠå­—ç¬¦ä¸²çœ‹ä½œæ˜¯å­å­—ç¬¦ä¸²çš„é›†åˆ, è€Œä¸æ˜¯å­—ç¬¦çš„é›†åˆ.\n\n### æ¯”è¾ƒ\n\t\nå­—ç¬¦ä¸²ä¸ä¼šè‡ªå·±æ­£è§„åŒ–, æ‰€ä»¥æ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒä¼šå¾—å‡ºé”™è¯¯çš„ç»“æœ. `isEqual:` å’Œ `isEqualToString:` éƒ½æ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚åœ°æ¯”è¾ƒ, å¦‚æœå¸Œæœ›å­—ç¬¦çš„åˆæˆå’Œåˆ†è§£å½¢å¼ç›¸å»åˆ, éœ€è¦æ‰‹åŠ¨æ­£è§„åŒ–.\n\n\t\n\t\tNSString *s = @\"\\u00E9\";\n\t\tNSString *t = @\"e\\u0301\"; // e + Â´\n\t\tBOOL isEqual = [s isEqualToString:t];\n\t\tNSLog(@\"%@ is %@ to %@\", s, isEqual ? @\"equal\" : @\"not equal\", t);  \n\t\t\n\t\tLog:\n\t\t\tÃ© is not equal to Ã©\n\n\t\tNSString *sNorm = [s precomposedStringWithCanonicalMapping];  \n\t\tNSString *tNorm = [t precomposedStringWithCanonicalMapping];  \n\t\tBOOL isEqualNorm = [sNorm isEqualToString:tNorm];  \n\t\tNSLog(@\"%@ is %@ to %@\", sNorm, isEqualNorm ? @\"equal\" : @\"not equal\", tNorm); \n\n\t\tLog:\n\t\t\tÃ© is equal to Ã©\n\n\nå¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ `compare:` æ–¹æ³• (æˆ– `localizedCompare:`), è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå’Œå®ƒç›¸å®¹ç­‰ä»·çš„å­—ç¬¦ä¸²\n\n\t\tNSString *s = @\"ff\"; // ff  \n\t\tNSString *t = @\"\\uFB00\"; // ï¬€ ligature  \n\t\tNSComparisonResult result = [s localizedCompare:t];  \n\t\tNSLog(@\"%@ is %@ to %@\", s, result == NSOrderedSame ? @\"equal\" : @\"not equal\", t);  \n\n\t\tLog:\n \t\t\tff is equal to ï¬€\n\n\n ä¸è€ƒè™‘ç­‰ä»·å…³ç³», æŒ‡ç¤ºæ¯”è¾ƒå­—ç¬¦ä¸² compare:options æŒ‡å®š NSLiteralSearch ä¼šæœ‰æ›´å¿«çš„é€Ÿåº¦\n\n\n\n### ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\n\t\nå½“çŸ¥é“å­—ç¬¦ç¼–ç ç±»å‹æ—¶, `-[NSString initWithData:encoding:]` ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å®ä¾‹åŒ–å­—ç¬¦ä¸², ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸æä¾›é”™è¯¯ä¿¡æ¯.\n\t\nè™½ç„¶æ–‡æœ¬æ–‡ä»¶æœ¬èº«ä¸åŒ…å«ç¼–ç ä¿¡æ¯, ä½† `NSString` ä¼šé€šè¿‡æŸ¥çœ‹æ‰©å±•æ–‡ä»¶å±æ€§ (extented file attributes)æˆ–è€…è§„å¾‹è¯•æ¢(UTF-8æ–‡ä»¶é‡Œä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šçš„äºŒè¿›åˆ¶åºåˆ—)çŒœæµ‹æ¥ç¡®å®šæ–‡ä»¶çš„ç¼–ç , å¯ä»¥ä½¿ç”¨ `-[NSString initWithContentsOfURL:encoding:error:]` è¿™ä¸ªæ–¹æ³•ï¼Œæ¥ä»ç¼–ç å·²çŸ¥çš„æ–‡ä»¶é‡Œè¯»å–æ–‡æœ¬ã€‚\n\t\nå¦‚æœä¸å¾—ä¸çŒœæµ‹æ–‡ä»¶çš„ç¼–ç :\n\n1. è¯•è¯•è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š`stringWithContentsOfFile:usedEncoding:error:` æˆ–è€… `initWithContentsOfFile:usedEncoding:error:` ï¼ˆæˆ–è€…è¿™ä¸¤ä¸ªæ–¹æ³•å‚æ•°ä¸º URL çš„ç­‰ä»·æ–¹æ³•ï¼‰ã€‚ è¿™äº›æ–¹æ³•ä¼šå°è¯•çŒœæµ‹èµ„æºçš„ç¼–ç ï¼Œå¦‚æœçŒœæµ‹æˆåŠŸï¼Œä¼šä»¥å¼•ç”¨çš„å½¢å¼å¸¦å›æ‰€ç”¨çš„ç¼–ç ã€‚\n2. å¦‚æœ 1 å¤±è´¥äº†ï¼Œè¯•ç€ç”¨ UTF-8 è¯»å–èµ„æºã€‚\n3. å¦‚æœ 2 å¤±è´¥äº†ï¼Œè¯•è¯•åˆé€‚çš„è€çš„ç¼–ç ã€‚ è¿™é‡Œã€Œåˆé€‚çš„ã€å–å†³äºå…·ä½“æƒ…å†µã€‚å®ƒå¯ä»¥æ˜¯é»˜è®¤çš„ C è¯­è¨€å­—ç¬¦ä¸²ç¼–ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ `ISO` æˆ–è€… `Windows Latin 1` ç¼–ç ï¼Œäº¦æˆ–è€…æ˜¯å…¶å®ƒçš„ï¼Œå–å†³äºä½ çš„æ•°æ®æ¥æºã€‚\n4. æœ€ç»ˆï¼Œè¿˜å¯ä»¥è¯•è¯• `Application Kit` é‡Œ `NSAttributedString` ç±»çš„è½½å…¥æ–¹æ³•ï¼ˆæ¯”å¦‚ï¼š`initWithFileURL:options:documentAttributes:error:`ï¼‰ã€‚è¿™äº›æ–¹æ³•ä¼šå°è¯•çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åè¿”å›ä½¿ç”¨çš„ç¼–ç ã€‚å¯ä»¥ç”¨è¿™äº›æ–¹æ³•æ‰“å¼€ä»»æ„çš„æ–‡æ¡£ã€‚å¦‚æœä½ çš„ç¨‹åºå¹¶ä¸æ˜¯ä¸“ä¸šå¤„ç†æ–‡æœ¬çš„ç¨‹åºï¼Œè¿™äº›æ–¹æ³•ä¹Ÿå€¼å¾—è€ƒè™‘ã€‚å¯¹äº `Foundation` çº§åˆ«çš„å·¥å…·ï¼Œæˆ–è€…ä¸æ˜¯è‡ªç„¶è¯­è¨€çš„æ–‡æœ¬æ¥è¯´ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½ä¸å¤ªåˆé€‚ã€‚\n\nç½‘ç»œä¼ è¾“æ–‡æœ¬åº”è¯¥ `UTF-8` ç¼–ç , é™¤éæœ‰ç‰¹åˆ«çš„éœ€è¦åªèƒ½ç”¨å…¶ä»–çš„ç¼–ç éœ€è¦å‘æ–‡ä»¶ä¸­å†™å…¥æ–‡æœ¬, éœ€è¦ä½¿ç”¨ `writeToURL:atomically:encoding:error:`æ–¹æ³•, è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ `UTF-16` æˆ– `UTF-32` ç¼–ç æ–‡ä»¶ä¸Šè‡ªåŠ¨åŠ ä¸Šå­—èŠ‚é¡ºåºæ ‡è®°. å®ƒè¿˜ä¼šæŠŠæ–‡ä»¶çš„ç¼–ç å­˜å‚¨åœ¨åä¸º `com.apple.TextEncoding` çš„æ‰©å±•æ–‡ä»¶å±æ€§é‡Œ\n\n\næœ¬æ–‡ä¸»è¦å‚è€ƒ: https://objccn.io/issue-9-1/\n\nå…¶ä»–é“¾æ¥:\n\nhttp://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt\n\t\nhttps://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Strings/Articles/stringsClusters.html\n\t\nhttp://www.joelonsoftware.com/articles/Unicode.html\n\t\nhttps://vimeo.com/86030221\n\t\nhttp://nsconference.com\n\t\nhttps://en.wikipedia.org/wiki/Unicode\t\n\n\n\n\n\n","source":"_posts/unicodeç¬”è®°.md","raw":"---\ntitle: Unicodeå­¦ä¹ ç¬”è®°\ndate: 2016-08-05 01:30:00\n\ncategories:\n- å­—ç¬¦ä¸²\n\ntags: \n- Unicode\n- NSString\n- unichar\n- UTF-32\n- UTF-16\n- UTF-8\n\n---\n\n\n\n# Unicode\n\t\n`Unicode` æ˜¯21ä½ç¼–ç , ä¸æ˜¯16ä½, è¢«åˆ†ä¸º17ä¸ªå¹³é¢ [Plane](https://en.wikipedia.org/wiki/Plane_&#41;Unicode&#41;), æ¯ä¸ªå¹³é¢æœ‰65536ä¸ªå­—ç¬¦. 0å·å¹³é¢å«åšåŸºæœ¬å¤šæ–‡ç§å¹³é¢ (Basic Multilingual Plane, BMP), æ¶µç›–äº†å‡ ä¹æ‰€æœ‰å­—ç¬¦, é™¤äº† `emoji`.\n\n### ç ç‚¹\nå•ä¸€ç ç‚¹: ä¸€èˆ¬å­—ç¬¦éƒ½æ˜¯å•ä¸€ç ç‚¹\n\nç»„åˆç ç‚¹: ç”±ä¸¤ä¸ªç ç‚¹ç»„åˆè€Œæˆ\n\t\n`Ã©(U+00E9) å¯æ˜¯çœ‹æˆ e(U+0065) å’Œ Â´(U+0301) ç»„æˆ`\n\n### é‡å¤çš„å®šä¹‰\n\t\næ ‡å‡†ç­‰ä»·(canonically equivalent): ä¸åŒç ç‚¹æˆ–ä¸åŒå½¢å¼çš„ç ç‚¹, æœ‰ç›¸åŒçš„å¤–è§‚ä¸æ„ä¹‰\n\n`A(U+0041),\tA(U+0410)`\n\nç›¸å®¹ç­‰ä»·(compatibility equivalence): ç›¸åŒçš„å­—ç¬¦, ä½†åœ¨ä¸åŒä½¿ç”¨èŒƒå›´æœ‰ä¸åŒçš„æ„ä¹‰\t\n\t\n`ff(U+FB00),  f(U+0066) f(U+0066) `\n\n### æ­£è§„å½¢å¼ \n\nåœ¨ `Unicode` é‡Œ, åˆ¤æ–­å­—ç¬¦ä¸²çš„ç­‰ä»·æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•æ¦‚å¿µ, ä¸ºäº†é‰´å®šæ ‡å‡†ç­‰ä»·ä¸ç›¸å®¹ç­‰ä»·, `Unicode` å®šä¹‰äº†æ­£è§„åŒ–(normalization)ç®—æ³•. æ­£è§„åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ„æ€æ˜¯ï¼šä¸ºäº†èƒ½ä½¿å®ƒä¸å¦ä¸€ä¸ªæ­£è§„åŒ–äº†çš„å­—ç¬¦ä¸²è¿›è¡ŒäºŒè¿›åˆ¶æ¯”è¾ƒ(binary-compare)\n\n` | åˆæˆå½¢å¼(Ã©): | åˆ†è§£å½¢å¼ (e + Â´ )\n:------------: | :-------------: | :------------:\næ ‡å‡†ç­‰ä»· | C | D\n` | precomposedStringWithCanonicalMapping | decomposedStringWithCanonicalMapping\nç›¸å®¹ç­‰ä»· | KC | KD\n` | precomposedStringWithCompatibilityMapping | decomposedStringWithCompatibilityMapping\n\nä»…ä»…æ˜¯ä¸ºäº†æ¯”è¾ƒçš„è¯, å…ˆæŠŠå­—ç¬¦ä¸²æ­£è§„åŒ–æˆåˆ†è§£å½¢å¼(D)è¿˜æ˜¯åˆæˆå½¢å¼(C)å¹¶ä¸é‡è¦, ä½†æ˜¯CåŒ…å«ä¸¤ä¸ªæ­¥éª¤,å…ˆåˆ†è§£å†åˆæˆ, æ‰€æœ‰Dæ›´å¿«, `Unicode`è”ç›Ÿæ¨èç”¨Cçš„æ–¹å¼å­˜å‚¨, è¿™æ˜¯ä¸ºäº†å…¼å®¹æ—§çš„ç¼–ç ç³»ç»Ÿ. \n\n### å­—å½¢å˜ä½“\n\n`Unicode`æä¾›ä¸€ä¸ªå«åšå˜ä½“åºåˆ—(variation sequences)çš„æœºåˆ¶. ä¸€ä¸ªåŸºå‡†å­—ç¬¦åŠ ä¸Š256ä¸ªå˜ä½“é€‰æ‹©ç¬¦\n\t`emoji`çš„æ ·å¼å°±æ˜¯å˜ä½“åºåˆ—, ä¾‹: å½©è‰²çš„ä¼ä¸é»‘ç™½çš„ä¼  â˜”ï¸ (U+2614 U+FE0F), â˜”ï¸ (U+2614 U+FE0E)\n\n### UTF-32\n\n`UTF-32` æ¯ä¸ªç ç‚¹ä¸Šä½¿ç”¨æ•´32ä½, æ¯ä¸€ä¸ª `UTF-32` éƒ½å¯ä»¥ç›´æ¥è¡¨ç¤ºå¯¹åº”çš„ç ç‚¹, ä½†æ˜¯ä»æœªåœ¨å®é™…ä¸­ä½¿ç”¨, å› ä¸ºæ¯ä¸ªå­—ç¬¦å ç”¨4å­—èŠ‚å¤ªæµªè´¹æ§ä»¶\n\n##UTF-16 ä¸ ä»£ç†å¯¹ (Surrogate Pairs)\n`UTF-16` æ˜¯ä¸€ç§é•¿åº¦å¯å˜çš„ç¼–ç , åŸºæœ¬å¤šæ–‡ä¸­å¹³é¢(BMP)ä¸­æ¯ä¸€ä¸ªç ç‚¹éƒ½ç›´æ¥ä¸ä¸€ä¸ªç å…ƒç›¸æ˜ å°„. å…¶ä»–å¹³é¢(plane)éƒ½æ˜¯ä¸¤ä¸ª16ä½ç å…ƒæ¥ç¼–ç çš„, è¿™åˆèµ·æ¥è¡¨ç¤ºä¸€ä¸ªç ç‚¹çš„ç å…ƒå°±å«ä»£ç†å¯¹.\n\nä¸ºäº†é¿å…ä½¿ç”¨ `UTF-16` ç¼–ç çš„å­—ç¬¦ä¸²å­—èŠ‚åºåˆ—äº§ç”Ÿæ­§ä¹‰, `Unicode` é™åˆ¶äº† `U+0800` åˆ° `U+DFFF` èŒƒå›´å†…çš„ç¼–ç ç”¨äº `UTF-16`, è¿™ä¸ªèŒƒå›´å¤–çš„åºåˆ—ä¸ºä»£ç†å¯¹çš„ä¸€éƒ¨åˆ†. `UTF-16` ä¸‹, `U+0FFFF` æ˜¯ç¼–ç æœ€é«˜å€¼\n\n### å­—èŠ‚é¡ºåº\n\nåœ¨å†…å­˜é‡Œå­˜å‚¨çš„å­—ç¬¦ä¸², å¤§å¤šæ•°å®ç°æ–¹å¼é‡‡ç”¨è‡ªå·±å¹³å°çš„CPUå­—èŠ‚åº(endianness), è€Œåœ¨ç¡¬ç›˜å­˜å‚¨å’Œç½‘ç»œä¼ è¾“ä¸­, UTF8 è¯­åºåœ¨å­—ç¬¦ä¸²çš„å¼€å¤´æ’å…¥ä¸€ä¸ªå­—èŠ‚é¡ºåºæ ‡è®°(Byte Order Mask, BOM). å­—èŠ‚é¡ºåºæ ‡è®°æ˜¯ä¸€ä¸ªå€¼ä¸ºU+FEffçš„ç å…ƒ, é€šè¿‡æ£€æŸ¥æ–‡ä»¶çš„å¤´ä¸¤ä¸ªå­—èŠ‚, è§£ç å™¨å°±å¯ä»¥è¯†åˆ«å‡ºå…¶å­—èŠ‚é¡ºåº. UnicodeæŠŠé«˜å­—èŠ‚é¡ºåº(big-endian byte order)å®šä¸ºé»˜è®¤æƒ…å†µ.\n\n##UTF-8 (Ken Thompson å’Œ Rob Pike)\n\t\n`UTF-8` ä½¿ç”¨1~4ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªç ç‚¹. ä»0åˆ°127çš„è¿™äº›ç ç‚¹ç›´æ¥æ˜ å°„æˆ1ä¸ªå­—èŠ‚(ä¸ASCIIå®Œå…¨ç›¸åŒ), æ¥ä¸‹æ¥çš„1920æ­Œç ç‚¹æ˜ å°„æˆ2ä¸ªå­—èŠ‚, BMPé‡Œå‰©ä¸‹çš„ç ç‚¹éœ€è¦3ä¸ªå­—èŠ‚. `Unicode` çš„å…¶ä»–å¹³é¢é‡Œçš„ç ç‚¹åˆ™éœ€è¦4ä¸ªå­—èŠ‚. `UTF-8` æ˜¯åŸºäº8ä½çš„ç å…ƒçš„, å› æ­¤ä¸éœ€è¦å…³å¿ƒå­—èŠ‚é¡ºåº.\n\t\n`UTF-8` æˆä¸ºå­˜å‚¨å’Œäº¤æµ `Unicode` æ–‡æœ¬æ–¹é¢çš„æœ€ä½³ç¼–ç , ç”±äºå…¶æœ‰æ•ˆç‡çš„ç©ºé—´ä½¿ç”¨(ä»…å°±è¥¿æ–¹è¯­è¨€æ¥è®²)ï¼Œä»¥åŠä¸éœ€è¦æ“å¿ƒå­—èŠ‚é¡ºåº, å®ƒç°åœ¨ä¹Ÿå·²ç»æ˜¯æ–‡ä»¶æ ¼å¼ã€ç½‘ç»œåè®®ä»¥åŠ Web API é¢†åŸŸé‡Œäº‹å®ä¸Šçš„æ ‡å‡†äº†.\n\n### é•¿åº¦\n\t\nåŸºæœ¬å¤šç¨³é‡å¹³é¢å¤–çš„å­—ç¬¦:\n\néšç€emojiè¢«å¼•å…¥`Unicode`, ç»å¸¸ä¼šé‡åˆ°ä»£ç†å¯¹\n\n`[ğŸŒ length] == 2  true`\n\nç›´æ¥è®¡ç®—å­—ç¬¦ä¸²åœ¨UTF-32ç¼–ç ä¸‹æ‰€éœ€è¦çš„å­—èŠ‚æ•°, å†é™¤ä»¥4\n\t\t\n`[ğŸŒ lengthOfBytesUsingEncoding:UTF32StringEncoding]/4 == 1 true`\n\nç»„åˆå­—ç¬¦åºåˆ—:\n\t\n`å¦‚æœå­—æ¯ Ã© æ˜¯ä»¥åˆ†è§£å½¢å¼(e + Â´)ç¼–ç çš„ï¼Œç®—ä½œä¸¤ä¸ªç å…ƒ`\n\nå˜ä½“åºåˆ—:\n\n`ä»–ä»¬å’Œåˆ†è§£å½¢å¼çš„ç»„åˆå­—ç¬¦åºåˆ—ä¸€æ ·`\n\n\n### NSString + Unicode\n\t\nNSString å®Œå…¨å»ºç«‹åœ¨ `Unicode` ä¹‹ä¸Š, `CFString` ä¹ŸåŒ…å«äº† `NSString` çš„åº•å±‚å®ç°.\n \n`typedef unsigned short unichar`\n\n`unichar` ä¸º16ä½æ— ç¬¦å·æ•´å½¢, ä¸å¤Ÿç”¨æ¥è¡¨ç¤º21ä½ `Unicode` å­—ç¬¦.\n\n\t\t- (unichar)characterAtIndex: \t\n\t\n\t    NSString *string = @\"12ğŸŒ45\";\t// ğŸŒ2ä¸ªç å…ƒUnicode\n\t    NSLog(@\"%c\", [string characterAtIndex:1]);\n    \tNSLog(@\"%c\", [string characterAtIndex:2]);\n    \tNSLog(@\"%c\", [string characterAtIndex:3]);\n    \tNSLog(@\"%c\", [string characterAtIndex:4]);\n\n    \tLog:\n\t\t 2\n\t\t <\n\t\t ç©º\n\t\t 4\n\n   \t\tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(1, 1)]);\n   \t\tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(2, 1)]);\n   \t\tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(2, 2)]);\n    \tNSLog(@\"%@\", [string substringWithRange:NSMakeRange(4, 1)]);\n\n    \tLog:\n    \t 2\n    \t ç©º\n    \t ğŸŒ\n    \t 5\n\n   stringä¸­, ğŸŒçš„21ä½è¢«æˆªä¸º2ä¸ª16ä½å¤„ç†, ç¬¬ä¸€ä¸ªä¸º<, ç¬¬äºŒä¸ªæœªè¯†åˆ«, æ‰€ä»¥åœ¨ä½¿ç”¨BMPä»¥å¤–çš„Unicodeæ—¶, è¦ç‰¹åˆ«æ³¨æ„\n\n\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:1]));\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:2]));\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:3]));\n    \tNSLog(@\"%@\", NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:4]));\n    \t\n    \tLog:\n    \t\t{1, 1}\n\t\t\t{2, 2}\n\t\t\t{2, 2}\n\t\t\t{4, 1}\n\nåªæœ‰åœ¨`length == 1`çš„æ—¶å€™, æ‰èƒ½ç¡®è®¤`unichar`æ˜¯ä»£è¡¨å•ä¸ªç å…ƒ, ä½¿ç”¨ `-characterAtIndex:` æ–¹æ³•ä¸ä¼šå¯¼è‡´é—®é¢˜\n\néå†Stringæ¯ä¸€æ¬¡éƒ½ä½¿ç”¨ `rangeOfComposedCharacterSequenceAtIndex:` æ¥åˆ¤æ–­å­—ç¬¦æ˜¯å¦æ˜¯å•ä¸ªç å…ƒå¾ˆä¸æ–¹ä¾¿, åœ¨ Stringçš„ `enumerateSubstringsInRange:options:usingBlock:` æ–¹æ³•é‡Œ, å°†å‚æ•°æŒ‡å®šä¸º `NSStringEnumerationByComposedCharacterSequences`, å†…éƒ¨å®ç°äº†å­—ç¬¦æ˜¯å•ç å…ƒè¿˜æ˜¯åŒç å…ƒçš„åˆ¤æ–­,\n\nåŠ ä¸Š `NSStringEnumerationLocalized` å‚æ•°, åœ¨å®šä¹‰è¯è¯­é—´çš„å’Œå¥å­é—´çš„è¾¹ç•Œå¯ä»¥å°†ç”¨æˆ·æ‰€åœ¨çš„åŒºåŸŸä¹Ÿè€ƒè™‘è¿›å».\n\nè‹¹æœæŠŠå­—ç¬¦ä¸²çœ‹ä½œæ˜¯å­å­—ç¬¦ä¸²çš„é›†åˆ, è€Œä¸æ˜¯å­—ç¬¦çš„é›†åˆ.\n\n### æ¯”è¾ƒ\n\t\nå­—ç¬¦ä¸²ä¸ä¼šè‡ªå·±æ­£è§„åŒ–, æ‰€ä»¥æ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒä¼šå¾—å‡ºé”™è¯¯çš„ç»“æœ. `isEqual:` å’Œ `isEqualToString:` éƒ½æ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚åœ°æ¯”è¾ƒ, å¦‚æœå¸Œæœ›å­—ç¬¦çš„åˆæˆå’Œåˆ†è§£å½¢å¼ç›¸å»åˆ, éœ€è¦æ‰‹åŠ¨æ­£è§„åŒ–.\n\n\t\n\t\tNSString *s = @\"\\u00E9\";\n\t\tNSString *t = @\"e\\u0301\"; // e + Â´\n\t\tBOOL isEqual = [s isEqualToString:t];\n\t\tNSLog(@\"%@ is %@ to %@\", s, isEqual ? @\"equal\" : @\"not equal\", t);  \n\t\t\n\t\tLog:\n\t\t\tÃ© is not equal to Ã©\n\n\t\tNSString *sNorm = [s precomposedStringWithCanonicalMapping];  \n\t\tNSString *tNorm = [t precomposedStringWithCanonicalMapping];  \n\t\tBOOL isEqualNorm = [sNorm isEqualToString:tNorm];  \n\t\tNSLog(@\"%@ is %@ to %@\", sNorm, isEqualNorm ? @\"equal\" : @\"not equal\", tNorm); \n\n\t\tLog:\n\t\t\tÃ© is equal to Ã©\n\n\nå¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ `compare:` æ–¹æ³• (æˆ– `localizedCompare:`), è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå’Œå®ƒç›¸å®¹ç­‰ä»·çš„å­—ç¬¦ä¸²\n\n\t\tNSString *s = @\"ff\"; // ff  \n\t\tNSString *t = @\"\\uFB00\"; // ï¬€ ligature  \n\t\tNSComparisonResult result = [s localizedCompare:t];  \n\t\tNSLog(@\"%@ is %@ to %@\", s, result == NSOrderedSame ? @\"equal\" : @\"not equal\", t);  \n\n\t\tLog:\n \t\t\tff is equal to ï¬€\n\n\n ä¸è€ƒè™‘ç­‰ä»·å…³ç³», æŒ‡ç¤ºæ¯”è¾ƒå­—ç¬¦ä¸² compare:options æŒ‡å®š NSLiteralSearch ä¼šæœ‰æ›´å¿«çš„é€Ÿåº¦\n\n\n\n### ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\n\t\nå½“çŸ¥é“å­—ç¬¦ç¼–ç ç±»å‹æ—¶, `-[NSString initWithData:encoding:]` ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å®ä¾‹åŒ–å­—ç¬¦ä¸², ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸æä¾›é”™è¯¯ä¿¡æ¯.\n\t\nè™½ç„¶æ–‡æœ¬æ–‡ä»¶æœ¬èº«ä¸åŒ…å«ç¼–ç ä¿¡æ¯, ä½† `NSString` ä¼šé€šè¿‡æŸ¥çœ‹æ‰©å±•æ–‡ä»¶å±æ€§ (extented file attributes)æˆ–è€…è§„å¾‹è¯•æ¢(UTF-8æ–‡ä»¶é‡Œä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šçš„äºŒè¿›åˆ¶åºåˆ—)çŒœæµ‹æ¥ç¡®å®šæ–‡ä»¶çš„ç¼–ç , å¯ä»¥ä½¿ç”¨ `-[NSString initWithContentsOfURL:encoding:error:]` è¿™ä¸ªæ–¹æ³•ï¼Œæ¥ä»ç¼–ç å·²çŸ¥çš„æ–‡ä»¶é‡Œè¯»å–æ–‡æœ¬ã€‚\n\t\nå¦‚æœä¸å¾—ä¸çŒœæµ‹æ–‡ä»¶çš„ç¼–ç :\n\n1. è¯•è¯•è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š`stringWithContentsOfFile:usedEncoding:error:` æˆ–è€… `initWithContentsOfFile:usedEncoding:error:` ï¼ˆæˆ–è€…è¿™ä¸¤ä¸ªæ–¹æ³•å‚æ•°ä¸º URL çš„ç­‰ä»·æ–¹æ³•ï¼‰ã€‚ è¿™äº›æ–¹æ³•ä¼šå°è¯•çŒœæµ‹èµ„æºçš„ç¼–ç ï¼Œå¦‚æœçŒœæµ‹æˆåŠŸï¼Œä¼šä»¥å¼•ç”¨çš„å½¢å¼å¸¦å›æ‰€ç”¨çš„ç¼–ç ã€‚\n2. å¦‚æœ 1 å¤±è´¥äº†ï¼Œè¯•ç€ç”¨ UTF-8 è¯»å–èµ„æºã€‚\n3. å¦‚æœ 2 å¤±è´¥äº†ï¼Œè¯•è¯•åˆé€‚çš„è€çš„ç¼–ç ã€‚ è¿™é‡Œã€Œåˆé€‚çš„ã€å–å†³äºå…·ä½“æƒ…å†µã€‚å®ƒå¯ä»¥æ˜¯é»˜è®¤çš„ C è¯­è¨€å­—ç¬¦ä¸²ç¼–ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ `ISO` æˆ–è€… `Windows Latin 1` ç¼–ç ï¼Œäº¦æˆ–è€…æ˜¯å…¶å®ƒçš„ï¼Œå–å†³äºä½ çš„æ•°æ®æ¥æºã€‚\n4. æœ€ç»ˆï¼Œè¿˜å¯ä»¥è¯•è¯• `Application Kit` é‡Œ `NSAttributedString` ç±»çš„è½½å…¥æ–¹æ³•ï¼ˆæ¯”å¦‚ï¼š`initWithFileURL:options:documentAttributes:error:`ï¼‰ã€‚è¿™äº›æ–¹æ³•ä¼šå°è¯•çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åè¿”å›ä½¿ç”¨çš„ç¼–ç ã€‚å¯ä»¥ç”¨è¿™äº›æ–¹æ³•æ‰“å¼€ä»»æ„çš„æ–‡æ¡£ã€‚å¦‚æœä½ çš„ç¨‹åºå¹¶ä¸æ˜¯ä¸“ä¸šå¤„ç†æ–‡æœ¬çš„ç¨‹åºï¼Œè¿™äº›æ–¹æ³•ä¹Ÿå€¼å¾—è€ƒè™‘ã€‚å¯¹äº `Foundation` çº§åˆ«çš„å·¥å…·ï¼Œæˆ–è€…ä¸æ˜¯è‡ªç„¶è¯­è¨€çš„æ–‡æœ¬æ¥è¯´ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½ä¸å¤ªåˆé€‚ã€‚\n\nç½‘ç»œä¼ è¾“æ–‡æœ¬åº”è¯¥ `UTF-8` ç¼–ç , é™¤éæœ‰ç‰¹åˆ«çš„éœ€è¦åªèƒ½ç”¨å…¶ä»–çš„ç¼–ç éœ€è¦å‘æ–‡ä»¶ä¸­å†™å…¥æ–‡æœ¬, éœ€è¦ä½¿ç”¨ `writeToURL:atomically:encoding:error:`æ–¹æ³•, è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ `UTF-16` æˆ– `UTF-32` ç¼–ç æ–‡ä»¶ä¸Šè‡ªåŠ¨åŠ ä¸Šå­—èŠ‚é¡ºåºæ ‡è®°. å®ƒè¿˜ä¼šæŠŠæ–‡ä»¶çš„ç¼–ç å­˜å‚¨åœ¨åä¸º `com.apple.TextEncoding` çš„æ‰©å±•æ–‡ä»¶å±æ€§é‡Œ\n\n\næœ¬æ–‡ä¸»è¦å‚è€ƒ: https://objccn.io/issue-9-1/\n\nå…¶ä»–é“¾æ¥:\n\nhttp://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt\n\t\nhttps://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Strings/Articles/stringsClusters.html\n\t\nhttp://www.joelonsoftware.com/articles/Unicode.html\n\t\nhttps://vimeo.com/86030221\n\t\nhttp://nsconference.com\n\t\nhttps://en.wikipedia.org/wiki/Unicode\t\n\n\n\n\n\n","slug":"unicodeç¬”è®°","published":1,"updated":"2016-08-05T10:45:10.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cis6u0ljn0000xts6sta3rwns","content":"<h1 id=\"Unicode\"><a href=\"#Unicode\" class=\"headerlink\" title=\"Unicode\"></a>Unicode</h1><p><code>Unicode</code> æ˜¯21ä½ç¼–ç , ä¸æ˜¯16ä½, è¢«åˆ†ä¸º17ä¸ªå¹³é¢ <a href=\"https://en.wikipedia.org/wiki/Plane_&#41;Unicode&#41;\" target=\"_blank\" rel=\"external\">Plane</a>, æ¯ä¸ªå¹³é¢æœ‰65536ä¸ªå­—ç¬¦. 0å·å¹³é¢å«åšåŸºæœ¬å¤šæ–‡ç§å¹³é¢ (Basic Multilingual Plane, BMP), æ¶µç›–äº†å‡ ä¹æ‰€æœ‰å­—ç¬¦, é™¤äº† <code>emoji</code>.</p>\n<h3 id=\"ç ç‚¹\"><a href=\"#ç ç‚¹\" class=\"headerlink\" title=\"ç ç‚¹\"></a>ç ç‚¹</h3><p>å•ä¸€ç ç‚¹: ä¸€èˆ¬å­—ç¬¦éƒ½æ˜¯å•ä¸€ç ç‚¹</p>\n<p>ç»„åˆç ç‚¹: ç”±ä¸¤ä¸ªç ç‚¹ç»„åˆè€Œæˆ</p>\n<p><code>Ã©(U+00E9) å¯æ˜¯çœ‹æˆ e(U+0065) å’Œ Â´(U+0301) ç»„æˆ</code></p>\n<h3 id=\"é‡å¤çš„å®šä¹‰\"><a href=\"#é‡å¤çš„å®šä¹‰\" class=\"headerlink\" title=\"é‡å¤çš„å®šä¹‰\"></a>é‡å¤çš„å®šä¹‰</h3><p>æ ‡å‡†ç­‰ä»·(canonically equivalent): ä¸åŒç ç‚¹æˆ–ä¸åŒå½¢å¼çš„ç ç‚¹, æœ‰ç›¸åŒçš„å¤–è§‚ä¸æ„ä¹‰</p>\n<p><code>A(U+0041),    A(U+0410)</code></p>\n<p>ç›¸å®¹ç­‰ä»·(compatibility equivalence): ç›¸åŒçš„å­—ç¬¦, ä½†åœ¨ä¸åŒä½¿ç”¨èŒƒå›´æœ‰ä¸åŒçš„æ„ä¹‰    </p>\n<p><code>ff(U+FB00),  f(U+0066) f(U+0066)</code></p>\n<h3 id=\"æ­£è§„å½¢å¼\"><a href=\"#æ­£è§„å½¢å¼\" class=\"headerlink\" title=\"æ­£è§„å½¢å¼\"></a>æ­£è§„å½¢å¼</h3><p>åœ¨ <code>Unicode</code> é‡Œ, åˆ¤æ–­å­—ç¬¦ä¸²çš„ç­‰ä»·æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•æ¦‚å¿µ, ä¸ºäº†é‰´å®šæ ‡å‡†ç­‰ä»·ä¸ç›¸å®¹ç­‰ä»·, <code>Unicode</code> å®šä¹‰äº†æ­£è§„åŒ–(normalization)ç®—æ³•. æ­£è§„åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ„æ€æ˜¯ï¼šä¸ºäº†èƒ½ä½¿å®ƒä¸å¦ä¸€ä¸ªæ­£è§„åŒ–äº†çš„å­—ç¬¦ä¸²è¿›è¡ŒäºŒè¿›åˆ¶æ¯”è¾ƒ(binary-compare)</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">`</th>\n<th style=\"text-align:center\">åˆæˆå½¢å¼(Ã©):</th>\n<th style=\"text-align:center\">åˆ†è§£å½¢å¼ (e + Â´ )</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">æ ‡å‡†ç­‰ä»·</td>\n<td style=\"text-align:center\">C</td>\n<td style=\"text-align:center\">D</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">`</td>\n<td style=\"text-align:center\">precomposedStringWithCanonicalMapping</td>\n<td style=\"text-align:center\">decomposedStringWithCanonicalMapping</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ç›¸å®¹ç­‰ä»·</td>\n<td style=\"text-align:center\">KC</td>\n<td style=\"text-align:center\">KD</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">`</td>\n<td style=\"text-align:center\">precomposedStringWithCompatibilityMapping</td>\n<td style=\"text-align:center\">decomposedStringWithCompatibilityMapping</td>\n</tr>\n</tbody>\n</table>\n<p>ä»…ä»…æ˜¯ä¸ºäº†æ¯”è¾ƒçš„è¯, å…ˆæŠŠå­—ç¬¦ä¸²æ­£è§„åŒ–æˆåˆ†è§£å½¢å¼(D)è¿˜æ˜¯åˆæˆå½¢å¼(C)å¹¶ä¸é‡è¦, ä½†æ˜¯CåŒ…å«ä¸¤ä¸ªæ­¥éª¤,å…ˆåˆ†è§£å†åˆæˆ, æ‰€æœ‰Dæ›´å¿«, <code>Unicode</code>è”ç›Ÿæ¨èç”¨Cçš„æ–¹å¼å­˜å‚¨, è¿™æ˜¯ä¸ºäº†å…¼å®¹æ—§çš„ç¼–ç ç³»ç»Ÿ. </p>\n<h3 id=\"å­—å½¢å˜ä½“\"><a href=\"#å­—å½¢å˜ä½“\" class=\"headerlink\" title=\"å­—å½¢å˜ä½“\"></a>å­—å½¢å˜ä½“</h3><p><code>Unicode</code>æä¾›ä¸€ä¸ªå«åšå˜ä½“åºåˆ—(variation sequences)çš„æœºåˆ¶. ä¸€ä¸ªåŸºå‡†å­—ç¬¦åŠ ä¸Š256ä¸ªå˜ä½“é€‰æ‹©ç¬¦<br>    <code>emoji</code>çš„æ ·å¼å°±æ˜¯å˜ä½“åºåˆ—, ä¾‹: å½©è‰²çš„ä¼ä¸é»‘ç™½çš„ä¼  â˜”ï¸ (U+2614 U+FE0F), â˜”ï¸ (U+2614 U+FE0E)</p>\n<h3 id=\"UTF-32\"><a href=\"#UTF-32\" class=\"headerlink\" title=\"UTF-32\"></a>UTF-32</h3><p><code>UTF-32</code> æ¯ä¸ªç ç‚¹ä¸Šä½¿ç”¨æ•´32ä½, æ¯ä¸€ä¸ª <code>UTF-32</code> éƒ½å¯ä»¥ç›´æ¥è¡¨ç¤ºå¯¹åº”çš„ç ç‚¹, ä½†æ˜¯ä»æœªåœ¨å®é™…ä¸­ä½¿ç”¨, å› ä¸ºæ¯ä¸ªå­—ç¬¦å ç”¨4å­—èŠ‚å¤ªæµªè´¹æ§ä»¶</p>\n<p>##UTF-16 ä¸ ä»£ç†å¯¹ (Surrogate Pairs)<br><code>UTF-16</code> æ˜¯ä¸€ç§é•¿åº¦å¯å˜çš„ç¼–ç , åŸºæœ¬å¤šæ–‡ä¸­å¹³é¢(BMP)ä¸­æ¯ä¸€ä¸ªç ç‚¹éƒ½ç›´æ¥ä¸ä¸€ä¸ªç å…ƒç›¸æ˜ å°„. å…¶ä»–å¹³é¢(plane)éƒ½æ˜¯ä¸¤ä¸ª16ä½ç å…ƒæ¥ç¼–ç çš„, è¿™åˆèµ·æ¥è¡¨ç¤ºä¸€ä¸ªç ç‚¹çš„ç å…ƒå°±å«ä»£ç†å¯¹.</p>\n<p>ä¸ºäº†é¿å…ä½¿ç”¨ <code>UTF-16</code> ç¼–ç çš„å­—ç¬¦ä¸²å­—èŠ‚åºåˆ—äº§ç”Ÿæ­§ä¹‰, <code>Unicode</code> é™åˆ¶äº† <code>U+0800</code> åˆ° <code>U+DFFF</code> èŒƒå›´å†…çš„ç¼–ç ç”¨äº <code>UTF-16</code>, è¿™ä¸ªèŒƒå›´å¤–çš„åºåˆ—ä¸ºä»£ç†å¯¹çš„ä¸€éƒ¨åˆ†. <code>UTF-16</code> ä¸‹, <code>U+0FFFF</code> æ˜¯ç¼–ç æœ€é«˜å€¼</p>\n<h3 id=\"å­—èŠ‚é¡ºåº\"><a href=\"#å­—èŠ‚é¡ºåº\" class=\"headerlink\" title=\"å­—èŠ‚é¡ºåº\"></a>å­—èŠ‚é¡ºåº</h3><p>åœ¨å†…å­˜é‡Œå­˜å‚¨çš„å­—ç¬¦ä¸², å¤§å¤šæ•°å®ç°æ–¹å¼é‡‡ç”¨è‡ªå·±å¹³å°çš„CPUå­—èŠ‚åº(endianness), è€Œåœ¨ç¡¬ç›˜å­˜å‚¨å’Œç½‘ç»œä¼ è¾“ä¸­, UTF8 è¯­åºåœ¨å­—ç¬¦ä¸²çš„å¼€å¤´æ’å…¥ä¸€ä¸ªå­—èŠ‚é¡ºåºæ ‡è®°(Byte Order Mask, BOM). å­—èŠ‚é¡ºåºæ ‡è®°æ˜¯ä¸€ä¸ªå€¼ä¸ºU+FEffçš„ç å…ƒ, é€šè¿‡æ£€æŸ¥æ–‡ä»¶çš„å¤´ä¸¤ä¸ªå­—èŠ‚, è§£ç å™¨å°±å¯ä»¥è¯†åˆ«å‡ºå…¶å­—èŠ‚é¡ºåº. UnicodeæŠŠé«˜å­—èŠ‚é¡ºåº(big-endian byte order)å®šä¸ºé»˜è®¤æƒ…å†µ.</p>\n<p>##UTF-8 (Ken Thompson å’Œ Rob Pike)</p>\n<p><code>UTF-8</code> ä½¿ç”¨1~4ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªç ç‚¹. ä»0åˆ°127çš„è¿™äº›ç ç‚¹ç›´æ¥æ˜ å°„æˆ1ä¸ªå­—èŠ‚(ä¸ASCIIå®Œå…¨ç›¸åŒ), æ¥ä¸‹æ¥çš„1920æ­Œç ç‚¹æ˜ å°„æˆ2ä¸ªå­—èŠ‚, BMPé‡Œå‰©ä¸‹çš„ç ç‚¹éœ€è¦3ä¸ªå­—èŠ‚. <code>Unicode</code> çš„å…¶ä»–å¹³é¢é‡Œçš„ç ç‚¹åˆ™éœ€è¦4ä¸ªå­—èŠ‚. <code>UTF-8</code> æ˜¯åŸºäº8ä½çš„ç å…ƒçš„, å› æ­¤ä¸éœ€è¦å…³å¿ƒå­—èŠ‚é¡ºåº.</p>\n<p><code>UTF-8</code> æˆä¸ºå­˜å‚¨å’Œäº¤æµ <code>Unicode</code> æ–‡æœ¬æ–¹é¢çš„æœ€ä½³ç¼–ç , ç”±äºå…¶æœ‰æ•ˆç‡çš„ç©ºé—´ä½¿ç”¨(ä»…å°±è¥¿æ–¹è¯­è¨€æ¥è®²)ï¼Œä»¥åŠä¸éœ€è¦æ“å¿ƒå­—èŠ‚é¡ºåº, å®ƒç°åœ¨ä¹Ÿå·²ç»æ˜¯æ–‡ä»¶æ ¼å¼ã€ç½‘ç»œåè®®ä»¥åŠ Web API é¢†åŸŸé‡Œäº‹å®ä¸Šçš„æ ‡å‡†äº†.</p>\n<h3 id=\"é•¿åº¦\"><a href=\"#é•¿åº¦\" class=\"headerlink\" title=\"é•¿åº¦\"></a>é•¿åº¦</h3><p>åŸºæœ¬å¤šç¨³é‡å¹³é¢å¤–çš„å­—ç¬¦:</p>\n<p>éšç€emojiè¢«å¼•å…¥<code>Unicode</code>, ç»å¸¸ä¼šé‡åˆ°ä»£ç†å¯¹</p>\n<p><code>[ğŸŒ length] == 2  true</code></p>\n<p>ç›´æ¥è®¡ç®—å­—ç¬¦ä¸²åœ¨UTF-32ç¼–ç ä¸‹æ‰€éœ€è¦çš„å­—èŠ‚æ•°, å†é™¤ä»¥4</p>\n<p><code>[ğŸŒ lengthOfBytesUsingEncoding:UTF32StringEncoding]/4 == 1 true</code></p>\n<p>ç»„åˆå­—ç¬¦åºåˆ—:</p>\n<p><code>å¦‚æœå­—æ¯ Ã© æ˜¯ä»¥åˆ†è§£å½¢å¼(e + Â´)ç¼–ç çš„ï¼Œç®—ä½œä¸¤ä¸ªç å…ƒ</code></p>\n<p>å˜ä½“åºåˆ—:</p>\n<p><code>ä»–ä»¬å’Œåˆ†è§£å½¢å¼çš„ç»„åˆå­—ç¬¦åºåˆ—ä¸€æ ·</code></p>\n<h3 id=\"NSString-Unicode\"><a href=\"#NSString-Unicode\" class=\"headerlink\" title=\"NSString + Unicode\"></a>NSString + Unicode</h3><p>NSString å®Œå…¨å»ºç«‹åœ¨ <code>Unicode</code> ä¹‹ä¸Š, <code>CFString</code> ä¹ŸåŒ…å«äº† <code>NSString</code> çš„åº•å±‚å®ç°.</p>\n<p><code>typedef unsigned short unichar</code></p>\n<p><code>unichar</code> ä¸º16ä½æ— ç¬¦å·æ•´å½¢, ä¸å¤Ÿç”¨æ¥è¡¨ç¤º21ä½ <code>Unicode</code> å­—ç¬¦.</p>\n<pre><code>- (unichar)characterAtIndex:     \n\nNSString *string = @&quot;12ğŸŒ45&quot;;    // ğŸŒ2ä¸ªç å…ƒUnicode\nNSLog(@&quot;%c&quot;, [string characterAtIndex:1]);\nNSLog(@&quot;%c&quot;, [string characterAtIndex:2]);\nNSLog(@&quot;%c&quot;, [string characterAtIndex:3]);\nNSLog(@&quot;%c&quot;, [string characterAtIndex:4]);\n\nLog:\n 2\n &lt;\n ç©º\n 4\n\n   NSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(1, 1)]);\n   NSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(2, 1)]);\n   NSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(2, 2)]);\nNSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(4, 1)]);\n\nLog:\n 2\n ç©º\n ğŸŒ\n 5\n</code></pre><p>   stringä¸­, ğŸŒçš„21ä½è¢«æˆªä¸º2ä¸ª16ä½å¤„ç†, ç¬¬ä¸€ä¸ªä¸º&lt;, ç¬¬äºŒä¸ªæœªè¯†åˆ«, æ‰€ä»¥åœ¨ä½¿ç”¨BMPä»¥å¤–çš„Unicodeæ—¶, è¦ç‰¹åˆ«æ³¨æ„</p>\n<pre><code>NSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:1]));\nNSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:2]));\nNSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:3]));\nNSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:4]));\n\nLog:\n    {1, 1}\n    {2, 2}\n    {2, 2}\n    {4, 1}\n</code></pre><p>åªæœ‰åœ¨<code>length == 1</code>çš„æ—¶å€™, æ‰èƒ½ç¡®è®¤<code>unichar</code>æ˜¯ä»£è¡¨å•ä¸ªç å…ƒ, ä½¿ç”¨ <code>-characterAtIndex:</code> æ–¹æ³•ä¸ä¼šå¯¼è‡´é—®é¢˜</p>\n<p>éå†Stringæ¯ä¸€æ¬¡éƒ½ä½¿ç”¨ <code>rangeOfComposedCharacterSequenceAtIndex:</code> æ¥åˆ¤æ–­å­—ç¬¦æ˜¯å¦æ˜¯å•ä¸ªç å…ƒå¾ˆä¸æ–¹ä¾¿, åœ¨ Stringçš„ <code>enumerateSubstringsInRange:options:usingBlock:</code> æ–¹æ³•é‡Œ, å°†å‚æ•°æŒ‡å®šä¸º <code>NSStringEnumerationByComposedCharacterSequences</code>, å†…éƒ¨å®ç°äº†å­—ç¬¦æ˜¯å•ç å…ƒè¿˜æ˜¯åŒç å…ƒçš„åˆ¤æ–­,</p>\n<p>åŠ ä¸Š <code>NSStringEnumerationLocalized</code> å‚æ•°, åœ¨å®šä¹‰è¯è¯­é—´çš„å’Œå¥å­é—´çš„è¾¹ç•Œå¯ä»¥å°†ç”¨æˆ·æ‰€åœ¨çš„åŒºåŸŸä¹Ÿè€ƒè™‘è¿›å».</p>\n<p>è‹¹æœæŠŠå­—ç¬¦ä¸²çœ‹ä½œæ˜¯å­å­—ç¬¦ä¸²çš„é›†åˆ, è€Œä¸æ˜¯å­—ç¬¦çš„é›†åˆ.</p>\n<h3 id=\"æ¯”è¾ƒ\"><a href=\"#æ¯”è¾ƒ\" class=\"headerlink\" title=\"æ¯”è¾ƒ\"></a>æ¯”è¾ƒ</h3><p>å­—ç¬¦ä¸²ä¸ä¼šè‡ªå·±æ­£è§„åŒ–, æ‰€ä»¥æ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒä¼šå¾—å‡ºé”™è¯¯çš„ç»“æœ. <code>isEqual:</code> å’Œ <code>isEqualToString:</code> éƒ½æ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚åœ°æ¯”è¾ƒ, å¦‚æœå¸Œæœ›å­—ç¬¦çš„åˆæˆå’Œåˆ†è§£å½¢å¼ç›¸å»åˆ, éœ€è¦æ‰‹åŠ¨æ­£è§„åŒ–.</p>\n<pre><code>NSString *s = @&quot;\\u00E9&quot;;\nNSString *t = @&quot;e\\u0301&quot;; // e + Â´\nBOOL isEqual = [s isEqualToString:t];\nNSLog(@&quot;%@ is %@ to %@&quot;, s, isEqual ? @&quot;equal&quot; : @&quot;not equal&quot;, t);  \n\nLog:\n    Ã© is not equal to Ã©\n\nNSString *sNorm = [s precomposedStringWithCanonicalMapping];  \nNSString *tNorm = [t precomposedStringWithCanonicalMapping];  \nBOOL isEqualNorm = [sNorm isEqualToString:tNorm];  \nNSLog(@&quot;%@ is %@ to %@&quot;, sNorm, isEqualNorm ? @&quot;equal&quot; : @&quot;not equal&quot;, tNorm); \n\nLog:\n    Ã© is equal to Ã©\n</code></pre><p>å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ <code>compare:</code> æ–¹æ³• (æˆ– <code>localizedCompare:</code>), è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå’Œå®ƒç›¸å®¹ç­‰ä»·çš„å­—ç¬¦ä¸²</p>\n<pre><code>NSString *s = @&quot;ff&quot;; // ff  \nNSString *t = @&quot;\\uFB00&quot;; // ï¬€ ligature  \nNSComparisonResult result = [s localizedCompare:t];  \nNSLog(@&quot;%@ is %@ to %@&quot;, s, result == NSOrderedSame ? @&quot;equal&quot; : @&quot;not equal&quot;, t);  \n\nLog:\n     ff is equal to ï¬€\n</code></pre><p> ä¸è€ƒè™‘ç­‰ä»·å…³ç³», æŒ‡ç¤ºæ¯”è¾ƒå­—ç¬¦ä¸² compare:options æŒ‡å®š NSLiteralSearch ä¼šæœ‰æ›´å¿«çš„é€Ÿåº¦</p>\n<h3 id=\"ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\"><a href=\"#ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\" class=\"headerlink\" title=\"ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\"></a>ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬</h3><p>å½“çŸ¥é“å­—ç¬¦ç¼–ç ç±»å‹æ—¶, <code>-[NSString initWithData:encoding:]</code> ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å®ä¾‹åŒ–å­—ç¬¦ä¸², ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸æä¾›é”™è¯¯ä¿¡æ¯.</p>\n<p>è™½ç„¶æ–‡æœ¬æ–‡ä»¶æœ¬èº«ä¸åŒ…å«ç¼–ç ä¿¡æ¯, ä½† <code>NSString</code> ä¼šé€šè¿‡æŸ¥çœ‹æ‰©å±•æ–‡ä»¶å±æ€§ (extented file attributes)æˆ–è€…è§„å¾‹è¯•æ¢(UTF-8æ–‡ä»¶é‡Œä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šçš„äºŒè¿›åˆ¶åºåˆ—)çŒœæµ‹æ¥ç¡®å®šæ–‡ä»¶çš„ç¼–ç , å¯ä»¥ä½¿ç”¨ <code>-[NSString initWithContentsOfURL:encoding:error:]</code> è¿™ä¸ªæ–¹æ³•ï¼Œæ¥ä»ç¼–ç å·²çŸ¥çš„æ–‡ä»¶é‡Œè¯»å–æ–‡æœ¬ã€‚</p>\n<p>å¦‚æœä¸å¾—ä¸çŒœæµ‹æ–‡ä»¶çš„ç¼–ç :</p>\n<ol>\n<li>è¯•è¯•è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š<code>stringWithContentsOfFile:usedEncoding:error:</code> æˆ–è€… <code>initWithContentsOfFile:usedEncoding:error:</code> ï¼ˆæˆ–è€…è¿™ä¸¤ä¸ªæ–¹æ³•å‚æ•°ä¸º URL çš„ç­‰ä»·æ–¹æ³•ï¼‰ã€‚ è¿™äº›æ–¹æ³•ä¼šå°è¯•çŒœæµ‹èµ„æºçš„ç¼–ç ï¼Œå¦‚æœçŒœæµ‹æˆåŠŸï¼Œä¼šä»¥å¼•ç”¨çš„å½¢å¼å¸¦å›æ‰€ç”¨çš„ç¼–ç ã€‚</li>\n<li>å¦‚æœ 1 å¤±è´¥äº†ï¼Œè¯•ç€ç”¨ UTF-8 è¯»å–èµ„æºã€‚</li>\n<li>å¦‚æœ 2 å¤±è´¥äº†ï¼Œè¯•è¯•åˆé€‚çš„è€çš„ç¼–ç ã€‚ è¿™é‡Œã€Œåˆé€‚çš„ã€å–å†³äºå…·ä½“æƒ…å†µã€‚å®ƒå¯ä»¥æ˜¯é»˜è®¤çš„ C è¯­è¨€å­—ç¬¦ä¸²ç¼–ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>ISO</code> æˆ–è€… <code>Windows Latin 1</code> ç¼–ç ï¼Œäº¦æˆ–è€…æ˜¯å…¶å®ƒçš„ï¼Œå–å†³äºä½ çš„æ•°æ®æ¥æºã€‚</li>\n<li>æœ€ç»ˆï¼Œè¿˜å¯ä»¥è¯•è¯• <code>Application Kit</code> é‡Œ <code>NSAttributedString</code> ç±»çš„è½½å…¥æ–¹æ³•ï¼ˆæ¯”å¦‚ï¼š<code>initWithFileURL:options:documentAttributes:error:</code>ï¼‰ã€‚è¿™äº›æ–¹æ³•ä¼šå°è¯•çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åè¿”å›ä½¿ç”¨çš„ç¼–ç ã€‚å¯ä»¥ç”¨è¿™äº›æ–¹æ³•æ‰“å¼€ä»»æ„çš„æ–‡æ¡£ã€‚å¦‚æœä½ çš„ç¨‹åºå¹¶ä¸æ˜¯ä¸“ä¸šå¤„ç†æ–‡æœ¬çš„ç¨‹åºï¼Œè¿™äº›æ–¹æ³•ä¹Ÿå€¼å¾—è€ƒè™‘ã€‚å¯¹äº <code>Foundation</code> çº§åˆ«çš„å·¥å…·ï¼Œæˆ–è€…ä¸æ˜¯è‡ªç„¶è¯­è¨€çš„æ–‡æœ¬æ¥è¯´ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½ä¸å¤ªåˆé€‚ã€‚</li>\n</ol>\n<p>ç½‘ç»œä¼ è¾“æ–‡æœ¬åº”è¯¥ <code>UTF-8</code> ç¼–ç , é™¤éæœ‰ç‰¹åˆ«çš„éœ€è¦åªèƒ½ç”¨å…¶ä»–çš„ç¼–ç éœ€è¦å‘æ–‡ä»¶ä¸­å†™å…¥æ–‡æœ¬, éœ€è¦ä½¿ç”¨ <code>writeToURL:atomically:encoding:error:</code>æ–¹æ³•, è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ <code>UTF-16</code> æˆ– <code>UTF-32</code> ç¼–ç æ–‡ä»¶ä¸Šè‡ªåŠ¨åŠ ä¸Šå­—èŠ‚é¡ºåºæ ‡è®°. å®ƒè¿˜ä¼šæŠŠæ–‡ä»¶çš„ç¼–ç å­˜å‚¨åœ¨åä¸º <code>com.apple.TextEncoding</code> çš„æ‰©å±•æ–‡ä»¶å±æ€§é‡Œ</p>\n<p>æœ¬æ–‡ä¸»è¦å‚è€ƒ: <a href=\"https://objccn.io/issue-9-1/\" target=\"_blank\" rel=\"external\">https://objccn.io/issue-9-1/</a></p>\n<p>å…¶ä»–é“¾æ¥:</p>\n<p><a href=\"http://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt\" target=\"_blank\" rel=\"external\">http://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt</a></p>\n<p><a href=\"https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Strings/Articles/stringsClusters.html\" target=\"_blank\" rel=\"external\">https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Strings/Articles/stringsClusters.html</a></p>\n<p><a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" target=\"_blank\" rel=\"external\">http://www.joelonsoftware.com/articles/Unicode.html</a></p>\n<p><a href=\"https://vimeo.com/86030221\" target=\"_blank\" rel=\"external\">https://vimeo.com/86030221</a></p>\n<p><a href=\"http://nsconference.com\" target=\"_blank\" rel=\"external\">http://nsconference.com</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/Unicode\" target=\"_blank\" rel=\"external\">https://en.wikipedia.org/wiki/Unicode</a>    </p>\n","excerpt":"","more":"<h1 id=\"Unicode\"><a href=\"#Unicode\" class=\"headerlink\" title=\"Unicode\"></a>Unicode</h1><p><code>Unicode</code> æ˜¯21ä½ç¼–ç , ä¸æ˜¯16ä½, è¢«åˆ†ä¸º17ä¸ªå¹³é¢ <a href=\"https://en.wikipedia.org/wiki/Plane_&#41;Unicode&#41;\">Plane</a>, æ¯ä¸ªå¹³é¢æœ‰65536ä¸ªå­—ç¬¦. 0å·å¹³é¢å«åšåŸºæœ¬å¤šæ–‡ç§å¹³é¢ (Basic Multilingual Plane, BMP), æ¶µç›–äº†å‡ ä¹æ‰€æœ‰å­—ç¬¦, é™¤äº† <code>emoji</code>.</p>\n<h3 id=\"ç ç‚¹\"><a href=\"#ç ç‚¹\" class=\"headerlink\" title=\"ç ç‚¹\"></a>ç ç‚¹</h3><p>å•ä¸€ç ç‚¹: ä¸€èˆ¬å­—ç¬¦éƒ½æ˜¯å•ä¸€ç ç‚¹</p>\n<p>ç»„åˆç ç‚¹: ç”±ä¸¤ä¸ªç ç‚¹ç»„åˆè€Œæˆ</p>\n<p><code>Ã©(U+00E9) å¯æ˜¯çœ‹æˆ e(U+0065) å’Œ Â´(U+0301) ç»„æˆ</code></p>\n<h3 id=\"é‡å¤çš„å®šä¹‰\"><a href=\"#é‡å¤çš„å®šä¹‰\" class=\"headerlink\" title=\"é‡å¤çš„å®šä¹‰\"></a>é‡å¤çš„å®šä¹‰</h3><p>æ ‡å‡†ç­‰ä»·(canonically equivalent): ä¸åŒç ç‚¹æˆ–ä¸åŒå½¢å¼çš„ç ç‚¹, æœ‰ç›¸åŒçš„å¤–è§‚ä¸æ„ä¹‰</p>\n<p><code>A(U+0041),    A(U+0410)</code></p>\n<p>ç›¸å®¹ç­‰ä»·(compatibility equivalence): ç›¸åŒçš„å­—ç¬¦, ä½†åœ¨ä¸åŒä½¿ç”¨èŒƒå›´æœ‰ä¸åŒçš„æ„ä¹‰    </p>\n<p><code>ff(U+FB00),  f(U+0066) f(U+0066)</code></p>\n<h3 id=\"æ­£è§„å½¢å¼\"><a href=\"#æ­£è§„å½¢å¼\" class=\"headerlink\" title=\"æ­£è§„å½¢å¼\"></a>æ­£è§„å½¢å¼</h3><p>åœ¨ <code>Unicode</code> é‡Œ, åˆ¤æ–­å­—ç¬¦ä¸²çš„ç­‰ä»·æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•æ¦‚å¿µ, ä¸ºäº†é‰´å®šæ ‡å‡†ç­‰ä»·ä¸ç›¸å®¹ç­‰ä»·, <code>Unicode</code> å®šä¹‰äº†æ­£è§„åŒ–(normalization)ç®—æ³•. æ­£è§„åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ„æ€æ˜¯ï¼šä¸ºäº†èƒ½ä½¿å®ƒä¸å¦ä¸€ä¸ªæ­£è§„åŒ–äº†çš„å­—ç¬¦ä¸²è¿›è¡ŒäºŒè¿›åˆ¶æ¯”è¾ƒ(binary-compare)</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">`</th>\n<th style=\"text-align:center\">åˆæˆå½¢å¼(Ã©):</th>\n<th style=\"text-align:center\">åˆ†è§£å½¢å¼ (e + Â´ )</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">æ ‡å‡†ç­‰ä»·</td>\n<td style=\"text-align:center\">C</td>\n<td style=\"text-align:center\">D</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">`</td>\n<td style=\"text-align:center\">precomposedStringWithCanonicalMapping</td>\n<td style=\"text-align:center\">decomposedStringWithCanonicalMapping</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ç›¸å®¹ç­‰ä»·</td>\n<td style=\"text-align:center\">KC</td>\n<td style=\"text-align:center\">KD</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">`</td>\n<td style=\"text-align:center\">precomposedStringWithCompatibilityMapping</td>\n<td style=\"text-align:center\">decomposedStringWithCompatibilityMapping</td>\n</tr>\n</tbody>\n</table>\n<p>ä»…ä»…æ˜¯ä¸ºäº†æ¯”è¾ƒçš„è¯, å…ˆæŠŠå­—ç¬¦ä¸²æ­£è§„åŒ–æˆåˆ†è§£å½¢å¼(D)è¿˜æ˜¯åˆæˆå½¢å¼(C)å¹¶ä¸é‡è¦, ä½†æ˜¯CåŒ…å«ä¸¤ä¸ªæ­¥éª¤,å…ˆåˆ†è§£å†åˆæˆ, æ‰€æœ‰Dæ›´å¿«, <code>Unicode</code>è”ç›Ÿæ¨èç”¨Cçš„æ–¹å¼å­˜å‚¨, è¿™æ˜¯ä¸ºäº†å…¼å®¹æ—§çš„ç¼–ç ç³»ç»Ÿ. </p>\n<h3 id=\"å­—å½¢å˜ä½“\"><a href=\"#å­—å½¢å˜ä½“\" class=\"headerlink\" title=\"å­—å½¢å˜ä½“\"></a>å­—å½¢å˜ä½“</h3><p><code>Unicode</code>æä¾›ä¸€ä¸ªå«åšå˜ä½“åºåˆ—(variation sequences)çš„æœºåˆ¶. ä¸€ä¸ªåŸºå‡†å­—ç¬¦åŠ ä¸Š256ä¸ªå˜ä½“é€‰æ‹©ç¬¦<br>    <code>emoji</code>çš„æ ·å¼å°±æ˜¯å˜ä½“åºåˆ—, ä¾‹: å½©è‰²çš„ä¼ä¸é»‘ç™½çš„ä¼  â˜”ï¸ (U+2614 U+FE0F), â˜”ï¸ (U+2614 U+FE0E)</p>\n<h3 id=\"UTF-32\"><a href=\"#UTF-32\" class=\"headerlink\" title=\"UTF-32\"></a>UTF-32</h3><p><code>UTF-32</code> æ¯ä¸ªç ç‚¹ä¸Šä½¿ç”¨æ•´32ä½, æ¯ä¸€ä¸ª <code>UTF-32</code> éƒ½å¯ä»¥ç›´æ¥è¡¨ç¤ºå¯¹åº”çš„ç ç‚¹, ä½†æ˜¯ä»æœªåœ¨å®é™…ä¸­ä½¿ç”¨, å› ä¸ºæ¯ä¸ªå­—ç¬¦å ç”¨4å­—èŠ‚å¤ªæµªè´¹æ§ä»¶</p>\n<p>##UTF-16 ä¸ ä»£ç†å¯¹ (Surrogate Pairs)<br><code>UTF-16</code> æ˜¯ä¸€ç§é•¿åº¦å¯å˜çš„ç¼–ç , åŸºæœ¬å¤šæ–‡ä¸­å¹³é¢(BMP)ä¸­æ¯ä¸€ä¸ªç ç‚¹éƒ½ç›´æ¥ä¸ä¸€ä¸ªç å…ƒç›¸æ˜ å°„. å…¶ä»–å¹³é¢(plane)éƒ½æ˜¯ä¸¤ä¸ª16ä½ç å…ƒæ¥ç¼–ç çš„, è¿™åˆèµ·æ¥è¡¨ç¤ºä¸€ä¸ªç ç‚¹çš„ç å…ƒå°±å«ä»£ç†å¯¹.</p>\n<p>ä¸ºäº†é¿å…ä½¿ç”¨ <code>UTF-16</code> ç¼–ç çš„å­—ç¬¦ä¸²å­—èŠ‚åºåˆ—äº§ç”Ÿæ­§ä¹‰, <code>Unicode</code> é™åˆ¶äº† <code>U+0800</code> åˆ° <code>U+DFFF</code> èŒƒå›´å†…çš„ç¼–ç ç”¨äº <code>UTF-16</code>, è¿™ä¸ªèŒƒå›´å¤–çš„åºåˆ—ä¸ºä»£ç†å¯¹çš„ä¸€éƒ¨åˆ†. <code>UTF-16</code> ä¸‹, <code>U+0FFFF</code> æ˜¯ç¼–ç æœ€é«˜å€¼</p>\n<h3 id=\"å­—èŠ‚é¡ºåº\"><a href=\"#å­—èŠ‚é¡ºåº\" class=\"headerlink\" title=\"å­—èŠ‚é¡ºåº\"></a>å­—èŠ‚é¡ºåº</h3><p>åœ¨å†…å­˜é‡Œå­˜å‚¨çš„å­—ç¬¦ä¸², å¤§å¤šæ•°å®ç°æ–¹å¼é‡‡ç”¨è‡ªå·±å¹³å°çš„CPUå­—èŠ‚åº(endianness), è€Œåœ¨ç¡¬ç›˜å­˜å‚¨å’Œç½‘ç»œä¼ è¾“ä¸­, UTF8 è¯­åºåœ¨å­—ç¬¦ä¸²çš„å¼€å¤´æ’å…¥ä¸€ä¸ªå­—èŠ‚é¡ºåºæ ‡è®°(Byte Order Mask, BOM). å­—èŠ‚é¡ºåºæ ‡è®°æ˜¯ä¸€ä¸ªå€¼ä¸ºU+FEffçš„ç å…ƒ, é€šè¿‡æ£€æŸ¥æ–‡ä»¶çš„å¤´ä¸¤ä¸ªå­—èŠ‚, è§£ç å™¨å°±å¯ä»¥è¯†åˆ«å‡ºå…¶å­—èŠ‚é¡ºåº. UnicodeæŠŠé«˜å­—èŠ‚é¡ºåº(big-endian byte order)å®šä¸ºé»˜è®¤æƒ…å†µ.</p>\n<p>##UTF-8 (Ken Thompson å’Œ Rob Pike)</p>\n<p><code>UTF-8</code> ä½¿ç”¨1~4ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªç ç‚¹. ä»0åˆ°127çš„è¿™äº›ç ç‚¹ç›´æ¥æ˜ å°„æˆ1ä¸ªå­—èŠ‚(ä¸ASCIIå®Œå…¨ç›¸åŒ), æ¥ä¸‹æ¥çš„1920æ­Œç ç‚¹æ˜ å°„æˆ2ä¸ªå­—èŠ‚, BMPé‡Œå‰©ä¸‹çš„ç ç‚¹éœ€è¦3ä¸ªå­—èŠ‚. <code>Unicode</code> çš„å…¶ä»–å¹³é¢é‡Œçš„ç ç‚¹åˆ™éœ€è¦4ä¸ªå­—èŠ‚. <code>UTF-8</code> æ˜¯åŸºäº8ä½çš„ç å…ƒçš„, å› æ­¤ä¸éœ€è¦å…³å¿ƒå­—èŠ‚é¡ºåº.</p>\n<p><code>UTF-8</code> æˆä¸ºå­˜å‚¨å’Œäº¤æµ <code>Unicode</code> æ–‡æœ¬æ–¹é¢çš„æœ€ä½³ç¼–ç , ç”±äºå…¶æœ‰æ•ˆç‡çš„ç©ºé—´ä½¿ç”¨(ä»…å°±è¥¿æ–¹è¯­è¨€æ¥è®²)ï¼Œä»¥åŠä¸éœ€è¦æ“å¿ƒå­—èŠ‚é¡ºåº, å®ƒç°åœ¨ä¹Ÿå·²ç»æ˜¯æ–‡ä»¶æ ¼å¼ã€ç½‘ç»œåè®®ä»¥åŠ Web API é¢†åŸŸé‡Œäº‹å®ä¸Šçš„æ ‡å‡†äº†.</p>\n<h3 id=\"é•¿åº¦\"><a href=\"#é•¿åº¦\" class=\"headerlink\" title=\"é•¿åº¦\"></a>é•¿åº¦</h3><p>åŸºæœ¬å¤šç¨³é‡å¹³é¢å¤–çš„å­—ç¬¦:</p>\n<p>éšç€emojiè¢«å¼•å…¥<code>Unicode</code>, ç»å¸¸ä¼šé‡åˆ°ä»£ç†å¯¹</p>\n<p><code>[ğŸŒ length] == 2  true</code></p>\n<p>ç›´æ¥è®¡ç®—å­—ç¬¦ä¸²åœ¨UTF-32ç¼–ç ä¸‹æ‰€éœ€è¦çš„å­—èŠ‚æ•°, å†é™¤ä»¥4</p>\n<p><code>[ğŸŒ lengthOfBytesUsingEncoding:UTF32StringEncoding]/4 == 1 true</code></p>\n<p>ç»„åˆå­—ç¬¦åºåˆ—:</p>\n<p><code>å¦‚æœå­—æ¯ Ã© æ˜¯ä»¥åˆ†è§£å½¢å¼(e + Â´)ç¼–ç çš„ï¼Œç®—ä½œä¸¤ä¸ªç å…ƒ</code></p>\n<p>å˜ä½“åºåˆ—:</p>\n<p><code>ä»–ä»¬å’Œåˆ†è§£å½¢å¼çš„ç»„åˆå­—ç¬¦åºåˆ—ä¸€æ ·</code></p>\n<h3 id=\"NSString-Unicode\"><a href=\"#NSString-Unicode\" class=\"headerlink\" title=\"NSString + Unicode\"></a>NSString + Unicode</h3><p>NSString å®Œå…¨å»ºç«‹åœ¨ <code>Unicode</code> ä¹‹ä¸Š, <code>CFString</code> ä¹ŸåŒ…å«äº† <code>NSString</code> çš„åº•å±‚å®ç°.</p>\n<p><code>typedef unsigned short unichar</code></p>\n<p><code>unichar</code> ä¸º16ä½æ— ç¬¦å·æ•´å½¢, ä¸å¤Ÿç”¨æ¥è¡¨ç¤º21ä½ <code>Unicode</code> å­—ç¬¦.</p>\n<pre><code>- (unichar)characterAtIndex:     \n\nNSString *string = @&quot;12ğŸŒ45&quot;;    // ğŸŒ2ä¸ªç å…ƒUnicode\nNSLog(@&quot;%c&quot;, [string characterAtIndex:1]);\nNSLog(@&quot;%c&quot;, [string characterAtIndex:2]);\nNSLog(@&quot;%c&quot;, [string characterAtIndex:3]);\nNSLog(@&quot;%c&quot;, [string characterAtIndex:4]);\n\nLog:\n 2\n &lt;\n ç©º\n 4\n\n   NSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(1, 1)]);\n   NSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(2, 1)]);\n   NSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(2, 2)]);\nNSLog(@&quot;%@&quot;, [string substringWithRange:NSMakeRange(4, 1)]);\n\nLog:\n 2\n ç©º\n ğŸŒ\n 5\n</code></pre><p>   stringä¸­, ğŸŒçš„21ä½è¢«æˆªä¸º2ä¸ª16ä½å¤„ç†, ç¬¬ä¸€ä¸ªä¸º&lt;, ç¬¬äºŒä¸ªæœªè¯†åˆ«, æ‰€ä»¥åœ¨ä½¿ç”¨BMPä»¥å¤–çš„Unicodeæ—¶, è¦ç‰¹åˆ«æ³¨æ„</p>\n<pre><code>NSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:1]));\nNSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:2]));\nNSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:3]));\nNSLog(@&quot;%@&quot;, NSStringFromRange([string rangeOfComposedCharacterSequenceAtIndex:4]));\n\nLog:\n    {1, 1}\n    {2, 2}\n    {2, 2}\n    {4, 1}\n</code></pre><p>åªæœ‰åœ¨<code>length == 1</code>çš„æ—¶å€™, æ‰èƒ½ç¡®è®¤<code>unichar</code>æ˜¯ä»£è¡¨å•ä¸ªç å…ƒ, ä½¿ç”¨ <code>-characterAtIndex:</code> æ–¹æ³•ä¸ä¼šå¯¼è‡´é—®é¢˜</p>\n<p>éå†Stringæ¯ä¸€æ¬¡éƒ½ä½¿ç”¨ <code>rangeOfComposedCharacterSequenceAtIndex:</code> æ¥åˆ¤æ–­å­—ç¬¦æ˜¯å¦æ˜¯å•ä¸ªç å…ƒå¾ˆä¸æ–¹ä¾¿, åœ¨ Stringçš„ <code>enumerateSubstringsInRange:options:usingBlock:</code> æ–¹æ³•é‡Œ, å°†å‚æ•°æŒ‡å®šä¸º <code>NSStringEnumerationByComposedCharacterSequences</code>, å†…éƒ¨å®ç°äº†å­—ç¬¦æ˜¯å•ç å…ƒè¿˜æ˜¯åŒç å…ƒçš„åˆ¤æ–­,</p>\n<p>åŠ ä¸Š <code>NSStringEnumerationLocalized</code> å‚æ•°, åœ¨å®šä¹‰è¯è¯­é—´çš„å’Œå¥å­é—´çš„è¾¹ç•Œå¯ä»¥å°†ç”¨æˆ·æ‰€åœ¨çš„åŒºåŸŸä¹Ÿè€ƒè™‘è¿›å».</p>\n<p>è‹¹æœæŠŠå­—ç¬¦ä¸²çœ‹ä½œæ˜¯å­å­—ç¬¦ä¸²çš„é›†åˆ, è€Œä¸æ˜¯å­—ç¬¦çš„é›†åˆ.</p>\n<h3 id=\"æ¯”è¾ƒ\"><a href=\"#æ¯”è¾ƒ\" class=\"headerlink\" title=\"æ¯”è¾ƒ\"></a>æ¯”è¾ƒ</h3><p>å­—ç¬¦ä¸²ä¸ä¼šè‡ªå·±æ­£è§„åŒ–, æ‰€ä»¥æ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒä¼šå¾—å‡ºé”™è¯¯çš„ç»“æœ. <code>isEqual:</code> å’Œ <code>isEqualToString:</code> éƒ½æ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚åœ°æ¯”è¾ƒ, å¦‚æœå¸Œæœ›å­—ç¬¦çš„åˆæˆå’Œåˆ†è§£å½¢å¼ç›¸å»åˆ, éœ€è¦æ‰‹åŠ¨æ­£è§„åŒ–.</p>\n<pre><code>NSString *s = @&quot;\\u00E9&quot;;\nNSString *t = @&quot;e\\u0301&quot;; // e + Â´\nBOOL isEqual = [s isEqualToString:t];\nNSLog(@&quot;%@ is %@ to %@&quot;, s, isEqual ? @&quot;equal&quot; : @&quot;not equal&quot;, t);  \n\nLog:\n    Ã© is not equal to Ã©\n\nNSString *sNorm = [s precomposedStringWithCanonicalMapping];  \nNSString *tNorm = [t precomposedStringWithCanonicalMapping];  \nBOOL isEqualNorm = [sNorm isEqualToString:tNorm];  \nNSLog(@&quot;%@ is %@ to %@&quot;, sNorm, isEqualNorm ? @&quot;equal&quot; : @&quot;not equal&quot;, tNorm); \n\nLog:\n    Ã© is equal to Ã©\n</code></pre><p>å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ <code>compare:</code> æ–¹æ³• (æˆ– <code>localizedCompare:</code>), è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå’Œå®ƒç›¸å®¹ç­‰ä»·çš„å­—ç¬¦ä¸²</p>\n<pre><code>NSString *s = @&quot;ff&quot;; // ff  \nNSString *t = @&quot;\\uFB00&quot;; // ï¬€ ligature  \nNSComparisonResult result = [s localizedCompare:t];  \nNSLog(@&quot;%@ is %@ to %@&quot;, s, result == NSOrderedSame ? @&quot;equal&quot; : @&quot;not equal&quot;, t);  \n\nLog:\n     ff is equal to ï¬€\n</code></pre><p> ä¸è€ƒè™‘ç­‰ä»·å…³ç³», æŒ‡ç¤ºæ¯”è¾ƒå­—ç¬¦ä¸² compare:options æŒ‡å®š NSLiteralSearch ä¼šæœ‰æ›´å¿«çš„é€Ÿåº¦</p>\n<h3 id=\"ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\"><a href=\"#ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\" class=\"headerlink\" title=\"ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬\"></a>ä»æ–‡ä»¶å’Œç½‘ç»œè¯»å–æ–‡æœ¬</h3><p>å½“çŸ¥é“å­—ç¬¦ç¼–ç ç±»å‹æ—¶, <code>-[NSString initWithData:encoding:]</code> ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å®ä¾‹åŒ–å­—ç¬¦ä¸², ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸æä¾›é”™è¯¯ä¿¡æ¯.</p>\n<p>è™½ç„¶æ–‡æœ¬æ–‡ä»¶æœ¬èº«ä¸åŒ…å«ç¼–ç ä¿¡æ¯, ä½† <code>NSString</code> ä¼šé€šè¿‡æŸ¥çœ‹æ‰©å±•æ–‡ä»¶å±æ€§ (extented file attributes)æˆ–è€…è§„å¾‹è¯•æ¢(UTF-8æ–‡ä»¶é‡Œä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šçš„äºŒè¿›åˆ¶åºåˆ—)çŒœæµ‹æ¥ç¡®å®šæ–‡ä»¶çš„ç¼–ç , å¯ä»¥ä½¿ç”¨ <code>-[NSString initWithContentsOfURL:encoding:error:]</code> è¿™ä¸ªæ–¹æ³•ï¼Œæ¥ä»ç¼–ç å·²çŸ¥çš„æ–‡ä»¶é‡Œè¯»å–æ–‡æœ¬ã€‚</p>\n<p>å¦‚æœä¸å¾—ä¸çŒœæµ‹æ–‡ä»¶çš„ç¼–ç :</p>\n<ol>\n<li>è¯•è¯•è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š<code>stringWithContentsOfFile:usedEncoding:error:</code> æˆ–è€… <code>initWithContentsOfFile:usedEncoding:error:</code> ï¼ˆæˆ–è€…è¿™ä¸¤ä¸ªæ–¹æ³•å‚æ•°ä¸º URL çš„ç­‰ä»·æ–¹æ³•ï¼‰ã€‚ è¿™äº›æ–¹æ³•ä¼šå°è¯•çŒœæµ‹èµ„æºçš„ç¼–ç ï¼Œå¦‚æœçŒœæµ‹æˆåŠŸï¼Œä¼šä»¥å¼•ç”¨çš„å½¢å¼å¸¦å›æ‰€ç”¨çš„ç¼–ç ã€‚</li>\n<li>å¦‚æœ 1 å¤±è´¥äº†ï¼Œè¯•ç€ç”¨ UTF-8 è¯»å–èµ„æºã€‚</li>\n<li>å¦‚æœ 2 å¤±è´¥äº†ï¼Œè¯•è¯•åˆé€‚çš„è€çš„ç¼–ç ã€‚ è¿™é‡Œã€Œåˆé€‚çš„ã€å–å†³äºå…·ä½“æƒ…å†µã€‚å®ƒå¯ä»¥æ˜¯é»˜è®¤çš„ C è¯­è¨€å­—ç¬¦ä¸²ç¼–ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>ISO</code> æˆ–è€… <code>Windows Latin 1</code> ç¼–ç ï¼Œäº¦æˆ–è€…æ˜¯å…¶å®ƒçš„ï¼Œå–å†³äºä½ çš„æ•°æ®æ¥æºã€‚</li>\n<li>æœ€ç»ˆï¼Œè¿˜å¯ä»¥è¯•è¯• <code>Application Kit</code> é‡Œ <code>NSAttributedString</code> ç±»çš„è½½å…¥æ–¹æ³•ï¼ˆæ¯”å¦‚ï¼š<code>initWithFileURL:options:documentAttributes:error:</code>ï¼‰ã€‚è¿™äº›æ–¹æ³•ä¼šå°è¯•çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åè¿”å›ä½¿ç”¨çš„ç¼–ç ã€‚å¯ä»¥ç”¨è¿™äº›æ–¹æ³•æ‰“å¼€ä»»æ„çš„æ–‡æ¡£ã€‚å¦‚æœä½ çš„ç¨‹åºå¹¶ä¸æ˜¯ä¸“ä¸šå¤„ç†æ–‡æœ¬çš„ç¨‹åºï¼Œè¿™äº›æ–¹æ³•ä¹Ÿå€¼å¾—è€ƒè™‘ã€‚å¯¹äº <code>Foundation</code> çº§åˆ«çš„å·¥å…·ï¼Œæˆ–è€…ä¸æ˜¯è‡ªç„¶è¯­è¨€çš„æ–‡æœ¬æ¥è¯´ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½ä¸å¤ªåˆé€‚ã€‚</li>\n</ol>\n<p>ç½‘ç»œä¼ è¾“æ–‡æœ¬åº”è¯¥ <code>UTF-8</code> ç¼–ç , é™¤éæœ‰ç‰¹åˆ«çš„éœ€è¦åªèƒ½ç”¨å…¶ä»–çš„ç¼–ç éœ€è¦å‘æ–‡ä»¶ä¸­å†™å…¥æ–‡æœ¬, éœ€è¦ä½¿ç”¨ <code>writeToURL:atomically:encoding:error:</code>æ–¹æ³•, è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ <code>UTF-16</code> æˆ– <code>UTF-32</code> ç¼–ç æ–‡ä»¶ä¸Šè‡ªåŠ¨åŠ ä¸Šå­—èŠ‚é¡ºåºæ ‡è®°. å®ƒè¿˜ä¼šæŠŠæ–‡ä»¶çš„ç¼–ç å­˜å‚¨åœ¨åä¸º <code>com.apple.TextEncoding</code> çš„æ‰©å±•æ–‡ä»¶å±æ€§é‡Œ</p>\n<p>æœ¬æ–‡ä¸»è¦å‚è€ƒ: <a href=\"https://objccn.io/issue-9-1/\">https://objccn.io/issue-9-1/</a></p>\n<p>å…¶ä»–é“¾æ¥:</p>\n<p><a href=\"http://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt\">http://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt</a></p>\n<p><a href=\"https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Strings/Articles/stringsClusters.html\">https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Strings/Articles/stringsClusters.html</a></p>\n<p><a href=\"http://www.joelonsoftware.com/articles/Unicode.html\">http://www.joelonsoftware.com/articles/Unicode.html</a></p>\n<p><a href=\"https://vimeo.com/86030221\">https://vimeo.com/86030221</a></p>\n<p><a href=\"http://nsconference.com\">http://nsconference.com</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/Unicode\">https://en.wikipedia.org/wiki/Unicode</a>    </p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cis6u0ljn0000xts6sta3rwns","category_id":"cis6u0lk20003xts6sirohrux","_id":"cis6u0lk40005xts6tt8zxx3w"}],"PostTag":[{"post_id":"cis6u0ljn0000xts6sta3rwns","tag_id":"cis6u0ljx0002xts6xt1tpuvz","_id":"cis6u0lk6000axts6v2ey6m40"},{"post_id":"cis6u0ljn0000xts6sta3rwns","tag_id":"cis6u0lk30004xts6vbrhg659","_id":"cis6u0lk6000bxts6mt8dshij"},{"post_id":"cis6u0ljn0000xts6sta3rwns","tag_id":"cis6u0lk40006xts636r0hcr7","_id":"cis6u0lk6000cxts64z0pkfen"},{"post_id":"cis6u0ljn0000xts6sta3rwns","tag_id":"cis6u0lk50007xts6hkfica8p","_id":"cis6u0lk6000dxts6rwzljs7f"},{"post_id":"cis6u0ljn0000xts6sta3rwns","tag_id":"cis6u0lk50008xts6jw7aoz2r","_id":"cis6u0lk6000exts68mqi1qoy"},{"post_id":"cis6u0ljn0000xts6sta3rwns","tag_id":"cis6u0lk50009xts60vjt012k","_id":"cis6u0lk6000fxts66lxexltv"}],"Tag":[{"name":"Unicode","_id":"cis6u0ljx0002xts6xt1tpuvz"},{"name":"NSString","_id":"cis6u0lk30004xts6vbrhg659"},{"name":"unichar","_id":"cis6u0lk40006xts636r0hcr7"},{"name":"UTF-32","_id":"cis6u0lk50007xts6hkfica8p"},{"name":"UTF-16","_id":"cis6u0lk50008xts6jw7aoz2r"},{"name":"UTF-8","_id":"cis6u0lk50009xts60vjt012k"}]}}